# ═══════════════════════════════════════════════════════════════════════════
# SONOS ALARM POPUP
# Redesigned to match room card styling standards
# - Uses layout-card grid structure
# - Orange/amber accent theme for all alarms
# - Glassmorphic card styling consistent with room cards
# - Dynamic time and recurrence display
# ═══════════════════════════════════════════════════════════════════════════
type: vertical-stack
cards:
  # ═════════════════════════════════════════════════════════════════════════
  # POP-UP HEADER
  # ═════════════════════════════════════════════════════════════════════════
  - type: custom:bubble-card
    card_type: pop-up
    hash: "#sonos-alarms"
    name: Alarms
    icon: mdi:alarm
    show_header: true
    bg_color: rgba(255, 255, 255, 0.95)
    bg_opacity: 95
    bg_blur: 20
    styles: |
      .bubble-pop-up-container {
        padding: 16px !important;
      }
      .bubble-header {
        margin-bottom: 8px !important;
      }
      .bubble-name {
        font-weight: 600 !important;
        font-size: 1.3em !important;
      }

  # ═════════════════════════════════════════════════════════════════════════
  # BEDROOM ALARMS
  # ═════════════════════════════════════════════════════════════════════════
  - type: custom:bubble-card
    card_type: separator
    name: Bedroom
    icon: mdi:bed-outline
    styles: |
      .bubble-separator { margin: 8px 0 8px 0 !important; }
      .bubble-name {
        color: rgba(0,0,0,0.6) !important;
        font-weight: 600;
        font-size: 0.9em;
      }
      .bubble-icon { color: rgba(0,0,0,0.5) !important; }
      .bubble-line { background: rgba(0,0,0,0.08) !important; }

  - type: custom:layout-card
    layout_type: custom:grid-layout
    layout:
      grid-template-columns: 1fr 1fr
      gap: 12px
      padding: 0
    cards:
      # Bedroom Alarm 1 - switch.sonos_alarm_182
      - type: custom:bubble-card
        card_type: button
        button_type: switch
        entity: switch.sonos_alarm_182
        name: " "
        icon: mdi:alarm
        show_state: false
        show_attribute: true
        attribute: recurrence
        tap_action:
          action: toggle
        hold_action:
          action: perform-action
          perform_action: script.sonos_load_alarm_for_edit
          data:
            alarm_entity: switch.sonos_alarm_182
        styles: |-
          ${(() => {
            const isOn = state === 'on';
            return `
              .bubble-button-card-container {
                position: relative !important;
                display: grid !important;
                grid-template-rows: auto auto 1fr !important;
                justify-items: center !important;
                align-items: center !important;
                text-align: center !important;
                min-height: 100px !important;
                padding: 14px 6px 12px 6px !important;
                border-radius: 16px !important;
                overflow: hidden !important;
                clip-path: inset(0 round 16px) !important;
                transition: transform 0.1s ease-out, border-color 0.15s ease, background 0.2s ease !important;
                background: ${isOn ? 'rgba(255, 255, 255, 0.95)' : 'rgba(255, 255, 255, 0.7)'} !important;
                border: ${isOn ? '2px solid rgba(255, 149, 0, 0.5)' : '2px solid rgba(200, 200, 200, 0.4)'} !important;
                box-shadow: ${isOn ? '0 2px 12px rgba(255, 149, 0, 0.12)' : '0 1px 4px rgba(0, 0, 0, 0.05)'} !important;
              }
              .bubble-button-card-container:active {
                transform: scale(0.95) !important;
              }
              .bubble-content-container {
                display: grid !important;
                grid-template-rows: auto auto 1fr !important;
                justify-items: center !important;
                width: 100% !important;
                position: relative !important;
                z-index: 5 !important;
              }
              .bubble-icon-container {
                min-width: 48px !important;
                min-height: 48px !important;
                grid-row: 1 !important;
                margin: 4px 0 6px 0 !important;
                border-radius: 50% !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                background: ${isOn ? 'rgba(255, 149, 0, 0.15)' : 'rgba(180, 180, 180, 0.2)'} !important;
                border: ${isOn ? '1.5px solid rgba(255, 149, 0, 0.3)' : '1.5px solid rgba(180, 180, 180, 0.3)'} !important;
              }
              .bubble-icon {
                --mdc-icon-size: 28px !important;
                color: ${isOn ? 'rgb(255, 149, 0)' : 'rgba(80, 80, 80, 0.5)'} !important;
                filter: ${isOn ? 'drop-shadow(0 0 4px rgba(255, 149, 0, 0.4))' : 'none'} !important;
              }
              .bubble-name-container {
                grid-row: 2 !important;
                margin: 0 !important;
                width: 100% !important;
              }
              .bubble-name {
                font-weight: 700 !important;
                font-size: 20px !important;
                line-height: 1.1 !important;
                justify-content: center !important;
                color: ${isOn ? 'rgba(30, 30, 30, 0.95)' : 'rgba(60, 60, 60, 0.5)'} !important;
              }
              .bubble-state, .bubble-attribute {
                font-size: 12px !important;
                font-weight: 600 !important;
                justify-content: center !important;
                color: ${isOn ? 'rgb(255, 149, 0)' : 'rgba(100, 100, 100, 0.6)'} !important;
                margin-top: 2px !important;
              }
            `;
          })()}
        card_mod:
          style: |
            ha-card { 
              background: transparent !important; 
              border: none !important; 
              box-shadow: none !important;
            }
            .bubble-name {
              font-size: 0 !important;
            }
            .bubble-name::after {
              font-size: 20px;
              font-weight: 700;
              content: '{{ state_attr("switch.sonos_alarm_182", "time")[:5] }}';
            }
            .bubble-attribute {
              font-size: 0 !important;
            }
            .bubble-attribute::after {
              font-size: 12px;
              font-weight: 600;
              content: '{% set r = state_attr("switch.sonos_alarm_182", "recurrence") %}{% if r == "DAILY" %}Every day{% elif r == "WEEKDAYS" %}Weekdays{% elif r == "WEEKENDS" %}Weekends{% elif r == "ONCE" %}Once{% elif r and r.startswith("ON_") %}Custom{% else %}{{ r }}{% endif %}';
            }

      # Bedroom Alarm 2 - switch.sonos_alarm_234
      - type: custom:bubble-card
        card_type: button
        button_type: switch
        entity: switch.sonos_alarm_234
        name: " "
        icon: mdi:alarm
        show_state: false
        show_attribute: true
        attribute: recurrence
        tap_action:
          action: toggle
        hold_action:
          action: perform-action
          perform_action: script.sonos_load_alarm_for_edit
          data:
            alarm_entity: switch.sonos_alarm_234
        styles: |-
          ${(() => {
            const isOn = state === 'on';
            return `
              .bubble-button-card-container {
                position: relative !important;
                display: grid !important;
                grid-template-rows: auto auto 1fr !important;
                justify-items: center !important;
                align-items: center !important;
                text-align: center !important;
                min-height: 100px !important;
                padding: 14px 6px 12px 6px !important;
                border-radius: 16px !important;
                overflow: hidden !important;
                clip-path: inset(0 round 16px) !important;
                transition: transform 0.1s ease-out, border-color 0.15s ease, background 0.2s ease !important;
                background: ${isOn ? 'rgba(255, 255, 255, 0.95)' : 'rgba(255, 255, 255, 0.7)'} !important;
                border: ${isOn ? '2px solid rgba(255, 149, 0, 0.5)' : '2px solid rgba(200, 200, 200, 0.4)'} !important;
                box-shadow: ${isOn ? '0 2px 12px rgba(255, 149, 0, 0.12)' : '0 1px 4px rgba(0, 0, 0, 0.05)'} !important;
              }
              .bubble-button-card-container:active {
                transform: scale(0.95) !important;
              }
              .bubble-content-container {
                display: grid !important;
                grid-template-rows: auto auto 1fr !important;
                justify-items: center !important;
                width: 100% !important;
                position: relative !important;
                z-index: 5 !important;
              }
              .bubble-icon-container {
                min-width: 48px !important;
                min-height: 48px !important;
                grid-row: 1 !important;
                margin: 4px 0 6px 0 !important;
                border-radius: 50% !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                background: ${isOn ? 'rgba(255, 149, 0, 0.15)' : 'rgba(180, 180, 180, 0.2)'} !important;
                border: ${isOn ? '1.5px solid rgba(255, 149, 0, 0.3)' : '1.5px solid rgba(180, 180, 180, 0.3)'} !important;
              }
              .bubble-icon {
                --mdc-icon-size: 28px !important;
                color: ${isOn ? 'rgb(255, 149, 0)' : 'rgba(80, 80, 80, 0.5)'} !important;
                filter: ${isOn ? 'drop-shadow(0 0 4px rgba(255, 149, 0, 0.4))' : 'none'} !important;
              }
              .bubble-name-container {
                grid-row: 2 !important;
                margin: 0 !important;
                width: 100% !important;
              }
              .bubble-name {
                font-weight: 700 !important;
                font-size: 20px !important;
                line-height: 1.1 !important;
                justify-content: center !important;
                color: ${isOn ? 'rgba(30, 30, 30, 0.95)' : 'rgba(60, 60, 60, 0.5)'} !important;
              }
              .bubble-state, .bubble-attribute {
                font-size: 12px !important;
                font-weight: 600 !important;
                justify-content: center !important;
                color: ${isOn ? 'rgb(255, 149, 0)' : 'rgba(100, 100, 100, 0.6)'} !important;
                margin-top: 2px !important;
              }
            `;
          })()}
        card_mod:
          style: |
            ha-card { 
              background: transparent !important; 
              border: none !important; 
              box-shadow: none !important;
            }
            .bubble-name {
              font-size: 0 !important;
            }
            .bubble-name::after {
              font-size: 20px;
              font-weight: 700;
              content: '{{ state_attr("switch.sonos_alarm_234", "time")[:5] }}';
            }
            .bubble-attribute {
              font-size: 0 !important;
            }
            .bubble-attribute::after {
              font-size: 12px;
              font-weight: 600;
              content: '{% set r = state_attr("switch.sonos_alarm_234", "recurrence") %}{% if r == "DAILY" %}Every day{% elif r == "WEEKDAYS" %}Weekdays{% elif r == "WEEKENDS" %}Weekends{% elif r == "ONCE" %}Once{% elif r and r.startswith("ON_") %}Custom{% else %}{{ r }}{% endif %}';
            }

  # ═════════════════════════════════════════════════════════════════════════
  # BATHROOM ALARMS
  # ═════════════════════════════════════════════════════════════════════════
  - type: custom:bubble-card
    card_type: separator
    name: Bathroom
    icon: mdi:shower-head
    styles: |
      .bubble-separator { margin: 16px 0 8px 0 !important; }
      .bubble-name {
        color: rgba(0,0,0,0.6) !important;
        font-weight: 600;
        font-size: 0.9em;
      }
      .bubble-icon { color: rgba(0,0,0,0.5) !important; }
      .bubble-line { background: rgba(0,0,0,0.08) !important; }

  - type: custom:layout-card
    layout_type: custom:grid-layout
    layout:
      grid-template-columns: 1fr 1fr
      gap: 12px
      padding: 0
    cards:
      # Bathroom Alarm 1 - switch.sonos_alarm_37
      - type: custom:bubble-card
        card_type: button
        button_type: switch
        entity: switch.sonos_alarm_37
        name: " "
        icon: mdi:alarm
        show_state: false
        show_attribute: true
        attribute: recurrence
        tap_action:
          action: toggle
        hold_action:
          action: perform-action
          perform_action: script.sonos_load_alarm_for_edit
          data:
            alarm_entity: switch.sonos_alarm_37
        styles: |-
          ${(() => {
            const isOn = state === 'on';
            return `
              .bubble-button-card-container {
                position: relative !important;
                display: grid !important;
                grid-template-rows: auto auto 1fr !important;
                justify-items: center !important;
                align-items: center !important;
                text-align: center !important;
                min-height: 100px !important;
                padding: 14px 6px 12px 6px !important;
                border-radius: 16px !important;
                overflow: hidden !important;
                clip-path: inset(0 round 16px) !important;
                transition: transform 0.1s ease-out, border-color 0.15s ease, background 0.2s ease !important;
                background: ${isOn ? 'rgba(255, 255, 255, 0.95)' : 'rgba(255, 255, 255, 0.7)'} !important;
                border: ${isOn ? '2px solid rgba(255, 149, 0, 0.5)' : '2px solid rgba(200, 200, 200, 0.4)'} !important;
                box-shadow: ${isOn ? '0 2px 12px rgba(255, 149, 0, 0.12)' : '0 1px 4px rgba(0, 0, 0, 0.05)'} !important;
              }
              .bubble-button-card-container:active {
                transform: scale(0.95) !important;
              }
              .bubble-content-container {
                display: grid !important;
                grid-template-rows: auto auto 1fr !important;
                justify-items: center !important;
                width: 100% !important;
                position: relative !important;
                z-index: 5 !important;
              }
              .bubble-icon-container {
                min-width: 48px !important;
                min-height: 48px !important;
                grid-row: 1 !important;
                margin: 4px 0 6px 0 !important;
                border-radius: 50% !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                background: ${isOn ? 'rgba(255, 149, 0, 0.15)' : 'rgba(180, 180, 180, 0.2)'} !important;
                border: ${isOn ? '1.5px solid rgba(255, 149, 0, 0.3)' : '1.5px solid rgba(180, 180, 180, 0.3)'} !important;
              }
              .bubble-icon {
                --mdc-icon-size: 28px !important;
                color: ${isOn ? 'rgb(255, 149, 0)' : 'rgba(80, 80, 80, 0.5)'} !important;
                filter: ${isOn ? 'drop-shadow(0 0 4px rgba(255, 149, 0, 0.4))' : 'none'} !important;
              }
              .bubble-name-container {
                grid-row: 2 !important;
                margin: 0 !important;
                width: 100% !important;
              }
              .bubble-name {
                font-weight: 700 !important;
                font-size: 20px !important;
                line-height: 1.1 !important;
                justify-content: center !important;
                color: ${isOn ? 'rgba(30, 30, 30, 0.95)' : 'rgba(60, 60, 60, 0.5)'} !important;
              }
              .bubble-state, .bubble-attribute {
                font-size: 12px !important;
                font-weight: 600 !important;
                justify-content: center !important;
                color: ${isOn ? 'rgb(255, 149, 0)' : 'rgba(100, 100, 100, 0.6)'} !important;
                margin-top: 2px !important;
              }
            `;
          })()}
        card_mod:
          style: |
            ha-card { 
              background: transparent !important; 
              border: none !important; 
              box-shadow: none !important;
            }
            .bubble-name {
              font-size: 0 !important;
            }
            .bubble-name::after {
              font-size: 20px;
              font-weight: 700;
              content: '{{ state_attr("switch.sonos_alarm_37", "time")[:5] }}';
            }
            .bubble-attribute {
              font-size: 0 !important;
            }
            .bubble-attribute::after {
              font-size: 12px;
              font-weight: 600;
              content: '{% set r = state_attr("switch.sonos_alarm_37", "recurrence") %}{% if r == "DAILY" %}Every day{% elif r == "WEEKDAYS" %}Weekdays{% elif r == "WEEKENDS" %}Weekends{% elif r == "ONCE" %}Once{% elif r and r.startswith("ON_") %}Custom{% else %}{{ r }}{% endif %}';
            }

      # Bathroom Alarm 2 - switch.sonos_alarm_823
      - type: custom:bubble-card
        card_type: button
        button_type: switch
        entity: switch.sonos_alarm_823
        name: " "
        icon: mdi:alarm
        show_state: false
        show_attribute: true
        attribute: recurrence
        tap_action:
          action: toggle
        hold_action:
          action: perform-action
          perform_action: script.sonos_load_alarm_for_edit
          data:
            alarm_entity: switch.sonos_alarm_823
        styles: |-
          ${(() => {
            const isOn = state === 'on';
            return `
              .bubble-button-card-container {
                position: relative !important;
                display: grid !important;
                grid-template-rows: auto auto 1fr !important;
                justify-items: center !important;
                align-items: center !important;
                text-align: center !important;
                min-height: 100px !important;
                padding: 14px 6px 12px 6px !important;
                border-radius: 16px !important;
                overflow: hidden !important;
                clip-path: inset(0 round 16px) !important;
                transition: transform 0.1s ease-out, border-color 0.15s ease, background 0.2s ease !important;
                background: ${isOn ? 'rgba(255, 255, 255, 0.95)' : 'rgba(255, 255, 255, 0.7)'} !important;
                border: ${isOn ? '2px solid rgba(255, 149, 0, 0.5)' : '2px solid rgba(200, 200, 200, 0.4)'} !important;
                box-shadow: ${isOn ? '0 2px 12px rgba(255, 149, 0, 0.12)' : '0 1px 4px rgba(0, 0, 0, 0.05)'} !important;
              }
              .bubble-button-card-container:active {
                transform: scale(0.95) !important;
              }
              .bubble-content-container {
                display: grid !important;
                grid-template-rows: auto auto 1fr !important;
                justify-items: center !important;
                width: 100% !important;
                position: relative !important;
                z-index: 5 !important;
              }
              .bubble-icon-container {
                min-width: 48px !important;
                min-height: 48px !important;
                grid-row: 1 !important;
                margin: 4px 0 6px 0 !important;
                border-radius: 50% !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                background: ${isOn ? 'rgba(255, 149, 0, 0.15)' : 'rgba(180, 180, 180, 0.2)'} !important;
                border: ${isOn ? '1.5px solid rgba(255, 149, 0, 0.3)' : '1.5px solid rgba(180, 180, 180, 0.3)'} !important;
              }
              .bubble-icon {
                --mdc-icon-size: 28px !important;
                color: ${isOn ? 'rgb(255, 149, 0)' : 'rgba(80, 80, 80, 0.5)'} !important;
                filter: ${isOn ? 'drop-shadow(0 0 4px rgba(255, 149, 0, 0.4))' : 'none'} !important;
              }
              .bubble-name-container {
                grid-row: 2 !important;
                margin: 0 !important;
                width: 100% !important;
              }
              .bubble-name {
                font-weight: 700 !important;
                font-size: 20px !important;
                line-height: 1.1 !important;
                justify-content: center !important;
                color: ${isOn ? 'rgba(30, 30, 30, 0.95)' : 'rgba(60, 60, 60, 0.5)'} !important;
              }
              .bubble-state, .bubble-attribute {
                font-size: 12px !important;
                font-weight: 600 !important;
                justify-content: center !important;
                color: ${isOn ? 'rgb(255, 149, 0)' : 'rgba(100, 100, 100, 0.6)'} !important;
                margin-top: 2px !important;
              }
            `;
          })()}
        card_mod:
          style: |
            ha-card { 
              background: transparent !important; 
              border: none !important; 
              box-shadow: none !important;
            }
            .bubble-name {
              font-size: 0 !important;
            }
            .bubble-name::after {
              font-size: 20px;
              font-weight: 700;
              content: '{{ state_attr("switch.sonos_alarm_823", "time")[:5] }}';
            }
            .bubble-attribute {
              font-size: 0 !important;
            }
            .bubble-attribute::after {
              font-size: 12px;
              font-weight: 600;
              content: '{% set r = state_attr("switch.sonos_alarm_823", "recurrence") %}{% if r == "DAILY" %}Every day{% elif r == "WEEKDAYS" %}Weekdays{% elif r == "WEEKENDS" %}Weekends{% elif r == "ONCE" %}Once{% elif r and r.startswith("ON_") %}Custom{% else %}{{ r }}{% endif %}';
            }

  # ═════════════════════════════════════════════════════════════════════════
  # KITCHEN ALARMS
  # ═════════════════════════════════════════════════════════════════════════
  - type: custom:bubble-card
    card_type: separator
    name: Kitchen
    icon: mdi:stove
    styles: |
      .bubble-separator { margin: 16px 0 8px 0 !important; }
      .bubble-name {
        color: rgba(0,0,0,0.6) !important;
        font-weight: 600;
        font-size: 0.9em;
      }
      .bubble-icon { color: rgba(0,0,0,0.5) !important; }
      .bubble-line { background: rgba(0,0,0,0.08) !important; }

  - type: custom:layout-card
    layout_type: custom:grid-layout
    layout:
      grid-template-columns: 1fr 1fr
      gap: 12px
      padding: 0
    cards:
      # Kitchen Alarm 1 - switch.sonos_alarm_15
      - type: custom:bubble-card
        card_type: button
        button_type: switch
        entity: switch.sonos_alarm_15
        name: " "
        icon: mdi:alarm
        show_state: false
        show_attribute: true
        attribute: recurrence
        tap_action:
          action: toggle
        hold_action:
          action: perform-action
          perform_action: script.sonos_load_alarm_for_edit
          data:
            alarm_entity: switch.sonos_alarm_15
        styles: |-
          ${(() => {
            const isOn = state === 'on';
            return `
              .bubble-button-card-container {
                position: relative !important;
                display: grid !important;
                grid-template-rows: auto auto 1fr !important;
                justify-items: center !important;
                align-items: center !important;
                text-align: center !important;
                min-height: 100px !important;
                padding: 14px 6px 12px 6px !important;
                border-radius: 16px !important;
                overflow: hidden !important;
                clip-path: inset(0 round 16px) !important;
                transition: transform 0.1s ease-out, border-color 0.15s ease, background 0.2s ease !important;
                background: ${isOn ? 'rgba(255, 255, 255, 0.95)' : 'rgba(255, 255, 255, 0.7)'} !important;
                border: ${isOn ? '2px solid rgba(255, 149, 0, 0.5)' : '2px solid rgba(200, 200, 200, 0.4)'} !important;
                box-shadow: ${isOn ? '0 2px 12px rgba(255, 149, 0, 0.12)' : '0 1px 4px rgba(0, 0, 0, 0.05)'} !important;
              }
              .bubble-button-card-container:active {
                transform: scale(0.95) !important;
              }
              .bubble-content-container {
                display: grid !important;
                grid-template-rows: auto auto 1fr !important;
                justify-items: center !important;
                width: 100% !important;
                position: relative !important;
                z-index: 5 !important;
              }
              .bubble-icon-container {
                min-width: 48px !important;
                min-height: 48px !important;
                grid-row: 1 !important;
                margin: 4px 0 6px 0 !important;
                border-radius: 50% !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                background: ${isOn ? 'rgba(255, 149, 0, 0.15)' : 'rgba(180, 180, 180, 0.2)'} !important;
                border: ${isOn ? '1.5px solid rgba(255, 149, 0, 0.3)' : '1.5px solid rgba(180, 180, 180, 0.3)'} !important;
              }
              .bubble-icon {
                --mdc-icon-size: 28px !important;
                color: ${isOn ? 'rgb(255, 149, 0)' : 'rgba(80, 80, 80, 0.5)'} !important;
                filter: ${isOn ? 'drop-shadow(0 0 4px rgba(255, 149, 0, 0.4))' : 'none'} !important;
              }
              .bubble-name-container {
                grid-row: 2 !important;
                margin: 0 !important;
                width: 100% !important;
              }
              .bubble-name {
                font-weight: 700 !important;
                font-size: 20px !important;
                line-height: 1.1 !important;
                justify-content: center !important;
                color: ${isOn ? 'rgba(30, 30, 30, 0.95)' : 'rgba(60, 60, 60, 0.5)'} !important;
              }
              .bubble-state, .bubble-attribute {
                font-size: 12px !important;
                font-weight: 600 !important;
                justify-content: center !important;
                color: ${isOn ? 'rgb(255, 149, 0)' : 'rgba(100, 100, 100, 0.6)'} !important;
                margin-top: 2px !important;
              }
            `;
          })()}
        card_mod:
          style: |
            ha-card { 
              background: transparent !important; 
              border: none !important; 
              box-shadow: none !important;
            }
            .bubble-name {
              font-size: 0 !important;
            }
            .bubble-name::after {
              font-size: 20px;
              font-weight: 700;
              content: '{{ state_attr("switch.sonos_alarm_15", "time")[:5] }}';
            }
            .bubble-attribute {
              font-size: 0 !important;
            }
            .bubble-attribute::after {
              font-size: 12px;
              font-weight: 600;
              content: '{% set r = state_attr("switch.sonos_alarm_15", "recurrence") %}{% if r == "DAILY" %}Every day{% elif r == "WEEKDAYS" %}Weekdays{% elif r == "WEEKENDS" %}Weekends{% elif r == "ONCE" %}Once{% elif r and r.startswith("ON_") %}Custom{% else %}{{ r }}{% endif %}';
            }

      # Kitchen Alarm 2 - switch.sonos_alarm_1
      - type: custom:bubble-card
        card_type: button
        button_type: switch
        entity: switch.sonos_alarm_1
        name: " "
        icon: mdi:alarm
        show_state: false
        show_attribute: true
        attribute: recurrence
        tap_action:
          action: toggle
        hold_action:
          action: perform-action
          perform_action: script.sonos_load_alarm_for_edit
          data:
            alarm_entity: switch.sonos_alarm_1
        styles: |-
          ${(() => {
            const isOn = state === 'on';
            return `
              .bubble-button-card-container {
                position: relative !important;
                display: grid !important;
                grid-template-rows: auto auto 1fr !important;
                justify-items: center !important;
                align-items: center !important;
                text-align: center !important;
                min-height: 100px !important;
                padding: 14px 6px 12px 6px !important;
                border-radius: 16px !important;
                overflow: hidden !important;
                clip-path: inset(0 round 16px) !important;
                transition: transform 0.1s ease-out, border-color 0.15s ease, background 0.2s ease !important;
                background: ${isOn ? 'rgba(255, 255, 255, 0.95)' : 'rgba(255, 255, 255, 0.7)'} !important;
                border: ${isOn ? '2px solid rgba(255, 149, 0, 0.5)' : '2px solid rgba(200, 200, 200, 0.4)'} !important;
                box-shadow: ${isOn ? '0 2px 12px rgba(255, 149, 0, 0.12)' : '0 1px 4px rgba(0, 0, 0, 0.05)'} !important;
              }
              .bubble-button-card-container:active {
                transform: scale(0.95) !important;
              }
              .bubble-content-container {
                display: grid !important;
                grid-template-rows: auto auto 1fr !important;
                justify-items: center !important;
                width: 100% !important;
                position: relative !important;
                z-index: 5 !important;
              }
              .bubble-icon-container {
                min-width: 48px !important;
                min-height: 48px !important;
                grid-row: 1 !important;
                margin: 4px 0 6px 0 !important;
                border-radius: 50% !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                background: ${isOn ? 'rgba(255, 149, 0, 0.15)' : 'rgba(180, 180, 180, 0.2)'} !important;
                border: ${isOn ? '1.5px solid rgba(255, 149, 0, 0.3)' : '1.5px solid rgba(180, 180, 180, 0.3)'} !important;
              }
              .bubble-icon {
                --mdc-icon-size: 28px !important;
                color: ${isOn ? 'rgb(255, 149, 0)' : 'rgba(80, 80, 80, 0.5)'} !important;
                filter: ${isOn ? 'drop-shadow(0 0 4px rgba(255, 149, 0, 0.4))' : 'none'} !important;
              }
              .bubble-name-container {
                grid-row: 2 !important;
                margin: 0 !important;
                width: 100% !important;
              }
              .bubble-name {
                font-weight: 700 !important;
                font-size: 20px !important;
                line-height: 1.1 !important;
                justify-content: center !important;
                color: ${isOn ? 'rgba(30, 30, 30, 0.95)' : 'rgba(60, 60, 60, 0.5)'} !important;
              }
              .bubble-state, .bubble-attribute {
                font-size: 12px !important;
                font-weight: 600 !important;
                justify-content: center !important;
                color: ${isOn ? 'rgb(255, 149, 0)' : 'rgba(100, 100, 100, 0.6)'} !important;
                margin-top: 2px !important;
              }
            `;
          })()}
        card_mod:
          style: |
            ha-card { 
              background: transparent !important; 
              border: none !important; 
              box-shadow: none !important;
            }
            .bubble-name {
              font-size: 0 !important;
            }
            .bubble-name::after {
              font-size: 20px;
              font-weight: 700;
              content: '{{ state_attr("switch.sonos_alarm_1", "time")[:5] }}';
            }
            .bubble-attribute {
              font-size: 0 !important;
            }
            .bubble-attribute::after {
              font-size: 12px;
              font-weight: 600;
              content: '{% set r = state_attr("switch.sonos_alarm_1", "recurrence") %}{% if r == "DAILY" %}Every day{% elif r == "WEEKDAYS" %}Weekdays{% elif r == "WEEKENDS" %}Weekends{% elif r == "ONCE" %}Once{% elif r and r.startswith("ON_") %}Custom{% else %}{{ r }}{% endif %}';
            }
