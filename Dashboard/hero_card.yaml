type: vertical-stack
cards:
  - type: custom:bubble-card
    card_type: button
    button_type: name
    card_layout: large
    show_icon: false
    show_name: false
    show_state: false
    sub_button:
      main:
        - name: Quick Controls
          buttons_layout: inline
          group:
            - entity: light.all_adaptive_lights
              name: All
              icon: mdi:lightbulb-group
              show_name: false
              show_icon: true
              show_background: true
              state_background: false
              custom_height: 38
              fill_width: false
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            - entity: input_select.oal_active_configuration
              name: Config
              icon: mdi:tune-variant
              show_name: false
              show_icon: true
              show_background: true
              state_background: false
              custom_height: 38
              fill_width: false
              tap_action:
                action: more-info
              hold_action:
                action: more-info
            - entity: script.oal_reset_soft
              name: Reset
              icon: mdi:refresh
              show_name: false
              show_icon: true
              show_background: true
              state_background: false
              custom_height: 38
              fill_width: false
              visibility:
                - condition: template
                  value_template: >-
                    {% set zones = [
                      'switch.adaptive_lighting_main_living',
                      'switch.adaptive_lighting_kitchen_island',
                      'switch.adaptive_lighting_bedroom_primary',
                      'switch.adaptive_lighting_accent_spots',
                      'switch.adaptive_lighting_recessed_ceiling',
                      'switch.adaptive_lighting_column_lights'
                    ] %} {% set manual_count = namespace(value=0) %} {% for zone
                    in zones %}
                      {% set manual_count.value = manual_count.value + (state_attr(zone, 'manual_control') | default([]) | length) %}
                    {% endfor %} {{ manual_count.value > 0 }}
              tap_action:
                action: perform-action
                perform_action: script.oal_reset_soft
                target: {}
            - entity: media_player.living_room
              name: Media
              icon: mdi:play-pause
              show_name: false
              show_icon: true
              show_background: true
              state_background: false
              custom_height: 38
              fill_width: false
              visibility:
                - condition: template
                  value_template: >-
                    {% set players = [
                      'media_player.living_room',
                      'media_player.kitchen',
                      'media_player.bedroom',
                      'media_player.bath',
                      'media_player.dining_room'
                    ] %} {{ players | map('states') | select('in', ['playing',
                    'paused']) | list | length > 0 }}
              tap_action:
                action: perform-action
                perform_action: media_player.media_play_pause
                target:
                  entity_id: media_player.living_room
            - entity: sensor.sonos_next_alarm_chip
              name: Alarm
              icon: mdi:alarm
              show_name: true
              show_icon: true
              show_background: true
              state_background: false
              custom_height: 38
              fill_width: false
              visibility:
                - condition: template
                  value_template: "{{ states('sensor.sonos_next_alarm_chip') != 'None' }}"
              tap_action:
                action: perform-action
                perform_action: script.sonos_toggle_next_alarm
                target: {}
              hold_action:
                action: more-info
            - entity: climate.dining_room
              name: Climate
              show_icon: false
              show_name: false
              show_attribute: true
              attribute: current_temperature
              show_background: true
              state_background: false
              custom_height: 38
              fill_width: false
              tap_action:
                action: more-info
    styles: >
      /* Hero card z-index - must appear above room tiles for dropdown */

      :host {
        position: relative !important;
        z-index: 100 !important;
        overflow: visible !important;
      }

      ha-card {
        background: transparent !important;
        border: none !important;
        box-shadow: none !important;
        margin: 0 !important;
        padding: 12px 16px 4px 16px !important;
      }

      .bubble-button-card-container {
        background: transparent !important;
      }

      .bubble-sub-button-container {
        background: rgba(255, 255, 255, 0.06) !important;
        backdrop-filter: blur(6px) saturate(120%) !important;
        -webkit-backdrop-filter: blur(6px) saturate(120%) !important;
        border-radius: 12px !important;
        border: 1px solid rgba(255, 255, 255, 0.12) !important;
        padding: 6px 10px !important;
        margin: 0 !important;
        box-shadow: none !important;
        width: fit-content !important;
        margin-left: auto !important;
      }

      .bubble-sub-button-1,

      .bubble-sub-button-2,

      .bubble-sub-button-3,

      .bubble-sub-button-4,

      .bubble-sub-button-5,

      .bubble-sub-button-6,

      .bubble-sub-button-7 {
        background: rgba(255, 255, 255, 0.10) !important;
        border: 1px solid rgba(255, 255, 255, 0.12) !important;
        border-radius: 8px !important;
      }

      /* Sub-button 1: All Lights - dynamic on/off styling */

      .bubble-sub-button-1 {
        background: ${hass.states['light.all_adaptive_lights']?.state === 'on'
          ? 'rgba(255, 255, 255, 0.18)'
          : 'rgba(255, 255, 255, 0.10)'} !important;
        border: ${hass.states['light.all_adaptive_lights']?.state === 'on'
          ? '1px solid rgba(255, 149, 0, 0.4)'
          : '1px solid rgba(255, 255, 255, 0.12)'} !important;
      }

      .bubble-sub-button-1 .bubble-sub-button-icon {
        color: ${hass.states['light.all_adaptive_lights']?.state === 'on'
          ? 'rgb(255, 149, 0)'
          : 'rgba(80, 80, 80, 0.7)'} !important;
        --mdc-icon-size: 20px !important;
      }

      /* Allow dropdowns to overflow card boundaries */

      .bubble-pop-up,

      .bubble-pop-up-content,

      .bubble-header-container {
        overflow: visible !important;
      }

      /* Sub-buttons container - ensure dropdowns appear above room tiles */

      .bubble-sub-button-container {
        position: relative !important;
        z-index: 100 !important;
      }

      /* Sub-button 2 (Config dropdown) - high z-index for dropdown overlay */

      .bubble-sub-button-2 {
        position: relative !important;
        z-index: 101 !important;
      }

      .bubble-sub-button-2 select,

      .bubble-sub-button-2 .mdc-select,

      .bubble-sub-button-2 .mdc-menu,

      .bubble-sub-button-2 .mdc-list {
        z-index: 9999 !important;
      }

       /* Sub-button 6: Climate temperature display (Weather removed) */

      .bubble-sub-button-6 .bubble-sub-button-attribute {
        color: rgba(60, 60, 60, 0.8) !important;
        font-weight: 600 !important;
        font-size: 12px !important;
      }

      /* Sub-button 2: Config Selector - show abbreviated config name */

      ${(() => {
        const config = hass.states['input_select.oal_active_configuration']?.state || '';
        // Extract just the config number/name
        let shortName = 'Config';
        if (config.includes('Baseline')) shortName = 'Base';
        else if (config.includes('Reduced')) shortName = 'Reduced';
        else if (config.includes('Evening')) shortName = 'Evening';
        else if (config.includes('Accents')) shortName = 'Accents';
        else if (config.includes('Manual')) shortName = 'Manual';
        
        // Highlight purple for any non-Baseline config
        const isNonBaseline = !config.includes('Baseline') && config !== '';

        return `
          .bubble-sub-button-2 {
            background: ${isNonBaseline
              ? 'rgba(138, 100, 200, 0.15)'
              : 'rgba(120, 120, 120, 0.10)'} !important;
            border: ${isNonBaseline
              ? '1px solid rgba(138, 100, 200, 0.35)'
              : '1px solid rgba(120, 120, 120, 0.25)'} !important;
            min-width: 50px !important;
          }
          .bubble-sub-button-2 .bubble-sub-button-icon {
            color: ${isNonBaseline ? 'rgba(120, 80, 180, 0.9)' : 'rgba(80, 80, 80, 0.5)'} !important;
            --mdc-icon-size: 18px !important;
          }
          .bubble-sub-button-2::after {
            content: '${shortName}';
            font-size: 8px;
            font-weight: 600;
            color: ${isNonBaseline ? 'rgba(90, 60, 140, 0.9)' : 'rgba(60, 60, 60, 0.7)'};
            position: absolute;
            bottom: 2px;
            right: 4px;
          }
        `;
      })()}

      /* Sub-button 3: Reset - purple highlight when any zone has manual control
      */

      ${(() => {
        const zones = [
          'switch.adaptive_lighting_main_living',
          'switch.adaptive_lighting_kitchen_island',
          'switch.adaptive_lighting_bedroom_primary',
          'switch.adaptive_lighting_accent_spots',
          'switch.adaptive_lighting_recessed_ceiling',
          'switch.adaptive_lighting_column_lights'
        ];
        const hasManual = zones.some(z => (hass.states[z]?.attributes?.manual_control || []).length > 0);
        
        // Get boost source from OAL Real-Time Monitor (already formatted)
        const monitor = hass.states['sensor.oal_real_time_monitor']?.attributes || {};
        const boostSource = monitor['Boost source'] || '';
        const hasBoost = boostSource && boostSource !== 'Baseline';
        
        // Check if any zone has manual offset (negative values mean dimmed below target)
        const manualOffsetKeys = [
          'Main living manual offset brightness pct',
          'Kitchen island manual offset brightness pct',
          'Bedroom primary manual offset brightness pct',
          'Accent spots manual offset brightness pct',
          'Recessed ceiling manual offset brightness pct',
          'Column lights manual offset brightness pct'
        ];
        const hasManualOffset = manualOffsetKeys.some(k => {
          const val = parseFloat(monitor[k] || 0);
          return val !== 0;
        });
        
        // Find soonest autoreset time across all zones with manual control
        let soonestSecs = null;
        zones.forEach(z => {
          const timerDict = hass.states[z]?.attributes?.autoreset_time_remaining || {};
          Object.values(timerDict).forEach(secs => {
            const s = parseFloat(secs);
            if (s > 0 && (soonestSecs === null || s < soonestSecs)) {
              soonestSecs = s;
            }
          });
        });
        
        // Format time string
        let timeStr = '';
        if (soonestSecs !== null && soonestSecs > 0) {
          const hours = Math.floor(soonestSecs / 3600);
          const mins = Math.floor((soonestSecs % 3600) / 60);
          if (hours > 0) {
            timeStr = hours + 'h ' + mins + 'm';
          } else {
            timeStr = mins + 'm';
          }
        }
        
        // Build display string - show time if manual control active, otherwise boost source
        let displayStr = '';
        if (hasManual && timeStr) {
          displayStr = timeStr;
        } else if (hasManualOffset && boostSource) {
          displayStr = boostSource + ' ðŸ–ï¸';
        } else if (hasManualOffset) {
          displayStr = 'ðŸ–ï¸';
        } else if (boostSource) {
          displayStr = boostSource;
        }
        
        // Purple highlight when manual control OR manual offsets OR boost active
        const showPurple = hasManual || hasManualOffset || hasBoost;
        
        return `
          .bubble-sub-button-3 {
            background: ${showPurple 
              ? 'rgba(138, 100, 200, 0.15)' 
              : 'rgba(120, 120, 120, 0.10)'} !important;
            border: ${showPurple 
              ? '1px solid rgba(138, 100, 200, 0.35)' 
              : '1px solid rgba(120, 120, 120, 0.25)'} !important;
          }
          .bubble-sub-button-3 .bubble-sub-button-icon {
            color: ${showPurple ? 'rgba(120, 80, 180, 0.9)' : 'rgba(80, 80, 80, 0.5)'} !important;
            --mdc-icon-size: 20px !important;
          }
          .bubble-sub-button-3::after {
            content: '${displayStr}';
            position: absolute;
            bottom: 2px;
            right: 4px;
            font-size: 8px;
            font-weight: 600;
            color: ${showPurple ? 'rgba(90, 60, 140, 0.9)' : 'transparent'};
          }
        `;
      })()}

      /* Sub-button 4: Media - dynamic styling based on playback state */

      ${(() => {
        const players = [
          'media_player.living_room',
          'media_player.kitchen',
          'media_player.bedroom',
          'media_player.bath',
          'media_player.dining_room'
        ];
        const anyPlaying = players.some(p => hass.states[p]?.state === 'playing');
        return `
          .bubble-sub-button-4 {
            background: ${anyPlaying 
              ? 'rgba(255, 149, 0, 0.15)' 
              : 'rgba(120, 120, 120, 0.10)'} !important;
            border: ${anyPlaying 
              ? '1px solid rgba(255, 149, 0, 0.4)' 
              : '1px solid rgba(120, 120, 120, 0.25)'} !important;
          }
          .bubble-sub-button-4 .bubble-sub-button-icon {
            color: ${anyPlaying ? 'rgb(255, 149, 0)' : 'rgba(80, 80, 80, 0.5)'} !important;
            --mdc-icon-size: 20px !important;
          }
        `;
      })()}

      /* Sub-button 5: Alarm - lavender styling with dynamic time and toggle state */

      ${(() => {
        // Alarm is ALWAYS sub-button-5 in YAML order regardless of visibility
        const idx = 5;

        // Read from the new chip sensor
        const chip = hass.states['sensor.sonos_next_alarm_chip'];
        const chipAttrs = chip?.attributes || {};

        // Check enabled state (handle both boolean and string 'True'/'False')
        const isEnabledRaw = chipAttrs.is_enabled;
        const isEnabled = isEnabledRaw === true || isEnabledRaw === 'True';

        // Check if manually disabled by user (for red dot indicator)
        const wasDisabledRaw = chipAttrs.was_manually_disabled;
        const wasManuallyDisabled = wasDisabledRaw === true || wasDisabledRaw === 'True';

        // Get time string and convert to 12h format
        const timeRaw = chipAttrs.time || '';
        let timeStr = '';
        if (timeRaw && timeRaw !== 'unknown' && timeRaw !== 'unavailable') {
          const [h,m] = timeRaw.split(':');
          if (h && m) {
            const h12 = parseInt(h) % 12 || 12;
            timeStr = h12 + ':' + m + (parseInt(h) >= 12 ? 'p' : 'a');
          }
        }

        // Add "OFF" suffix when disabled
        const displayStr = isEnabled ? timeStr : (timeStr ? timeStr + ' OFF' : 'OFF');

        return `
          .bubble-sub-button-${idx} {
            background: ${isEnabled
              ? 'rgba(138, 100, 200, 0.15)'
              : 'rgba(120, 120, 120, 0.10)'} !important;
            border: ${isEnabled
              ? '1px solid rgba(138, 100, 200, 0.35)'
              : '1px solid rgba(120, 120, 120, 0.25)'} !important;
            position: relative !important;
          }
          .bubble-sub-button-${idx} .bubble-sub-button-icon {
            color: ${isEnabled
              ? 'rgba(120, 80, 180, 0.9)'
              : 'rgba(80, 80, 80, 0.5)'} !important;
            --mdc-icon-size: 18px !important;
          }
          .bubble-sub-button-${idx} .bubble-sub-button-name {
            display: none !important;
          }
          .bubble-sub-button-${idx}::after {
            content: '${displayStr}';
            position: absolute;
            bottom: 2px;
            right: 4px;
            font-size: 8px;
            font-weight: 600;
            color: ${isEnabled
              ? 'rgba(90, 60, 140, 0.9)'
              : 'rgba(80, 80, 80, 0.6)'};
          }
          .bubble-sub-button-${idx}::before {
            content: '';
            position: absolute;
            top: 3px;
            right: 3px;
            width: ${wasManuallyDisabled ? '6px' : '0px'};
            height: ${wasManuallyDisabled ? '6px' : '0px'};
            border-radius: 50%;
            background: rgb(255, 110, 90);
            border: 1px solid rgba(255, 255, 255, 0.6);
            box-shadow: 0 0 3px rgba(255, 110, 90, 0.4);
          }
        `;
      })()}

      /* Sub-button 7: Climate temperature display */

      .bubble-sub-button-7 .bubble-sub-button-attribute {
        color: rgba(60, 60, 60, 0.8) !important;
        font-weight: 600 !important;
        font-size: 12px !important;
      }
  - type: horizontal-stack
    cards:
      - type: custom:bubble-card
        card_type: button
        button_type: slider
        entity: light.living_room_lights
        name: Living
        icon: mdi:sofa
        show_state: false
        show_attribute: true
        attribute: brightness
        scrolling_effect: false
        tap_action:
          action: toggle
        hold_action:
          action: more-info
        double_tap_action:
          action: call-service
          service: light.turn_on
          target:
            entity_id: light.living_room_lights
          data:
            brightness_pct: 100
        card_mod:
          style: |
            ha-card {
              background: transparent !important;
              border: none !important;
              box-shadow: none !important;
              max-width: clamp(95px, 22vw, 140px) !important;
              margin: 0 auto !important;
            }
        styles: >-
          .bubble-button-card-container {
            position: relative !important;
            display: grid !important;
            grid-template-rows: auto auto 1fr auto !important;
            justify-items: center !important;
            align-items: center !important;
            text-align: center !important;
            min-height: 76px !important;
            padding: 14px 6px 5px 6px !important;
            border-radius: 14px !important;
            overflow: hidden !important;
            clip-path: inset(0 round 14px) !important;
            transition: transform 0.1s ease-out, border-color 0.15s ease, background 0.2s ease !important;
            background: ${state === 'on'
              ? 'rgba(255, 255, 255, 0.20)'
              : 'rgba(255, 255, 255, 0.12)'} !important;
            backdrop-filter: blur(3px) !important;
            -webkit-backdrop-filter: blur(3px) !important;
            border: ${state === 'on'
              ? '1px solid rgba(255, 149, 0, 0.6)'
              : '1px solid rgba(120, 120, 120, 0.55)'} !important;
            box-shadow: ${state === 'on'
              ? '0 2px 10px rgba(255, 149, 0, 0.10)'
              : 'none'} !important;
          }

          .bubble-button-card-container:active { transform: scale(0.95)
          !important; }

          .bubble-content-container {
            display: grid !important;
            grid-template-rows: auto auto 1fr !important;
            justify-items: center !important;
            width: 100% !important;
            position: relative !important;
            z-index: 5 !important;
            padding-bottom: 10px !important;
          }

          .bubble-button-card-container::after {
            content: '' !important;
            position: absolute !important;
            top: 5px !important;
            right: 5px !important;
            width: ${(hass.states['switch.adaptive_lighting_main_living']?.attributes?.manual_control?.length > 0) ? '7px' : '0px'} !important;
            height: ${(hass.states['switch.adaptive_lighting_main_living']?.attributes?.manual_control?.length > 0) ? '7px' : '0px'} !important;
            border-radius: 50% !important;
            background: rgb(255, 110, 90) !important;
            border: 1px solid rgba(255, 255, 255, 0.6) !important;
            box-shadow: 0 0 4px rgba(255, 110, 90, 0.5) !important;
            transition: width 0.2s ease, height 0.2s ease !important;
            z-index: 25 !important;
          }

          .bubble-icon-container {
            min-width: 28px !important;
            min-height: 28px !important;
            grid-row: 1 !important;
            margin: 8px 0 6px 0 !important;
            border-radius: 50% !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            background: ${state === 'on'
              ? 'rgba(255, 149, 0, 0.22)'
              : 'rgba(60, 60, 60, 0.30)'} !important;
            border: ${state === 'on'
              ? '1px solid rgba(255, 149, 0, 0.35)'
              : '1px solid rgba(60, 60, 60, 0.40)'} !important;
          }

          .bubble-icon {
            --mdc-icon-size: 20px !important;
            color: ${state === 'on'
              ? 'rgb(255, 149, 0)'
              : 'rgba(40, 40, 40, 0.80)'} !important;
            filter: ${state === 'on' ? 'drop-shadow(0 0 3px rgba(255, 149, 0, 0.35))' : 'none'} !important;
          }

          .bubble-name-container {
            grid-row: 2 !important;
            margin: 0 !important;
            width: 100% !important;
          }

          .bubble-name {
            font-weight: 700 !important;
            font-size: 14px !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
            line-height: 1.1 !important;
            justify-content: center !important;
            margin: 0 4px !important;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.6) !important;
            color: ${state === 'on'
              ? 'rgba(40, 40, 40, 0.95)'
              : 'rgba(50, 50, 50, 0.75)'} !important;
          }

          .bubble-state {
            font-size: 12px !important;
            font-weight: 600 !important;
            margin-top: 1px !important;
            justify-content: center !important;
            color: ${state === 'on'
              ? 'rgba(40, 40, 40, 0.95)'
              : 'rgba(60, 60, 60, 0.7)'} !important;
          }

          .bubble-attribute {
            font-size: 12px !important;
            font-weight: 600 !important;
            margin-top: 1px !important;
            justify-content: center !important;
            color: ${state === 'on'
              ? 'rgb(255, 149, 0)'
              : 'rgba(60, 60, 60, 0.7)'} !important;
          }

          .bubble-range-slider {
            position: absolute !important;
            bottom: 4px !important;
            left: 0 !important;
            right: 0 !important;
            margin: 0 auto !important;
            width: 60% !important;
            height: 3px !important;
            border-radius: 3px !important;
            z-index: 10 !important;
            background: ${state === 'on'
              ? 'rgba(0, 0, 0, 0.08)'
              : 'transparent'} !important;
            overflow: hidden !important;
            opacity: ${state === 'on' ? '1' : '0'} !important;
            transition: opacity 0.2s ease !important;
          }

          .bubble-range-fill {
            height: 3px !important;
            border-radius: 3px !important;
            background: rgb(255, 149, 0) !important;
          }

          .bubble-range-value {
            position: fixed !important;
            top: 4px !important;
            right: 5px !important;
            font-size: 9px !important;
            font-weight: 600 !important;
            color: rgba(50, 50, 50, 0.9) !important;
            opacity: 0 !important;
            transition: opacity 0.15s ease !important;
            z-index: 20 !important;
          }

          .is-dragging .bubble-range-value { opacity: 1 !important; }
          .is-dragging .bubble-attribute { opacity: 0 !important; }
      - type: custom:bubble-card
        card_type: button
        button_type: slider
        entity: light.all_kitchen_lights
        name: Kitchen
        icon: mdi:countertop
        show_state: false
        show_attribute: true
        attribute: brightness
        scrolling_effect: false
        tap_action:
          action: toggle
        hold_action:
          action: more-info
        double_tap_action:
          action: call-service
          service: light.turn_on
          target:
            entity_id: light.all_kitchen_lights
          data:
            brightness_pct: 100
        card_mod:
          style: |
            ha-card {
              background: transparent !important;
              border: none !important;
              box-shadow: none !important;
              max-width: clamp(95px, 22vw, 140px) !important;
              margin: 0 auto !important;
            }
        styles: >-
          .bubble-button-card-container {
            position: relative !important;
            display: grid !important;
            grid-template-rows: auto auto 1fr auto !important;
            justify-items: center !important;
            align-items: center !important;
            text-align: center !important;
            min-height: 76px !important;
            padding: 14px 6px 5px 6px !important;
            border-radius: 14px !important;
            overflow: hidden !important;
            clip-path: inset(0 round 14px) !important;
            transition: transform 0.1s ease-out, border-color 0.15s ease, background 0.2s ease !important;
            background: ${state === 'on'
              ? 'rgba(255, 255, 255, 0.20)'
              : 'rgba(255, 255, 255, 0.12)'} !important;
            backdrop-filter: blur(3px) !important;
            -webkit-backdrop-filter: blur(3px) !important;
            border: ${state === 'on'
              ? '1px solid rgba(255, 149, 0, 0.6)'
              : '1px solid rgba(120, 120, 120, 0.55)'} !important;
            box-shadow: ${state === 'on'
              ? '0 2px 10px rgba(255, 149, 0, 0.10)'
              : 'none'} !important;
          }

          .bubble-button-card-container:active { transform: scale(0.95)
          !important; }

          .bubble-content-container {
            display: grid !important;
            grid-template-rows: auto auto 1fr !important;
            justify-items: center !important;
            width: 100% !important;
            position: relative !important;
            z-index: 5 !important;
            padding-bottom: 10px !important;
          }

          .bubble-button-card-container::after {
            content: '' !important;
            position: absolute !important;
            top: 5px !important;
            right: 5px !important;
            width: ${(hass.states['switch.adaptive_lighting_kitchen_island']?.attributes?.manual_control?.length > 0) ? '7px' : '0px'} !important;
            height: ${(hass.states['switch.adaptive_lighting_kitchen_island']?.attributes?.manual_control?.length > 0) ? '7px' : '0px'} !important;
            border-radius: 50% !important;
            background: rgb(255, 110, 90) !important;
            border: 1px solid rgba(255, 255, 255, 0.6) !important;
            box-shadow: 0 0 4px rgba(255, 110, 90, 0.5) !important;
            transition: width 0.2s ease, height 0.2s ease !important;
            z-index: 25 !important;
          }

          .bubble-icon-container {
            min-width: 28px !important;
            min-height: 28px !important;
            grid-row: 1 !important;
            margin: 8px 0 6px 0 !important;
            border-radius: 50% !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            background: ${state === 'on'
              ? 'rgba(255, 149, 0, 0.22)'
              : 'rgba(60, 60, 60, 0.30)'} !important;
            border: ${state === 'on'
              ? '1px solid rgba(255, 149, 0, 0.35)'
              : '1px solid rgba(60, 60, 60, 0.40)'} !important;
          }

          .bubble-icon {
            --mdc-icon-size: 20px !important;
            color: ${state === 'on'
              ? 'rgb(255, 149, 0)'
              : 'rgba(40, 40, 40, 0.80)'} !important;
            filter: ${state === 'on' ? 'drop-shadow(0 0 3px rgba(255, 149, 0, 0.35))' : 'none'} !important;
          }

          .bubble-name-container {
            grid-row: 2 !important;
            margin: 0 !important;
            width: 100% !important;
          }

          .bubble-name {
            font-weight: 700 !important;
            font-size: 14px !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
            line-height: 1.1 !important;
            justify-content: center !important;
            margin: 0 4px !important;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.6) !important;
            color: ${state === 'on'
              ? 'rgba(40, 40, 40, 0.95)'
              : 'rgba(50, 50, 50, 0.75)'} !important;
          }

          .bubble-state {
            font-size: 12px !important;
            font-weight: 600 !important;
            margin-top: 1px !important;
            justify-content: center !important;
            color: ${state === 'on'
              ? 'rgba(40, 40, 40, 0.95)'
              : 'rgba(60, 60, 60, 0.7)'} !important;
          }

          .bubble-attribute {
            font-size: 12px !important;
            font-weight: 600 !important;
            margin-top: 1px !important;
            justify-content: center !important;
            color: ${state === 'on'
              ? 'rgb(255, 149, 0)'
              : 'rgba(60, 60, 60, 0.7)'} !important;
          }

          .bubble-range-slider {
            position: absolute !important;
            bottom: 4px !important;
            left: 0 !important;
            right: 0 !important;
            margin: 0 auto !important;
            width: 60% !important;
            height: 3px !important;
            border-radius: 3px !important;
            z-index: 10 !important;
            background: ${state === 'on'
              ? 'rgba(0, 0, 0, 0.08)'
              : 'transparent'} !important;
            overflow: hidden !important;
            opacity: ${state === 'on' ? '1' : '0'} !important;
            transition: opacity 0.2s ease !important;
          }

          .bubble-range-fill {
            height: 3px !important;
            border-radius: 3px !important;
            background: rgb(255, 149, 0) !important;
          }

          .bubble-range-value {
            position: fixed !important;
            top: 4px !important;
            right: 5px !important;
            font-size: 9px !important;
            font-weight: 600 !important;
            color: rgba(50, 50, 50, 0.9) !important;
            opacity: 0 !important;
            transition: opacity 0.15s ease !important;
            z-index: 20 !important;
          }

          .is-dragging .bubble-range-value { opacity: 1 !important; }
          .is-dragging .bubble-attribute { opacity: 0 !important; }
      - type: custom:bubble-card
        card_type: button
        button_type: slider
        entity: light.bedroom_primary_lights
        name: Bedroom
        icon: mdi:bed
        show_state: false
        show_attribute: true
        attribute: brightness
        scrolling_effect: false
        tap_action:
          action: toggle
        hold_action:
          action: more-info
        double_tap_action:
          action: call-service
          service: light.turn_on
          target:
            entity_id: light.bedroom_primary_lights
          data:
            brightness_pct: 100
        card_mod:
          style: |
            ha-card {
              background: transparent !important;
              border: none !important;
              box-shadow: none !important;
              max-width: clamp(95px, 22vw, 140px) !important;
              margin: 0 auto !important;
            }
        styles: >-
          .bubble-button-card-container {
            position: relative !important;
            display: grid !important;
            grid-template-rows: auto auto 1fr auto !important;
            justify-items: center !important;
            align-items: center !important;
            text-align: center !important;
            min-height: 76px !important;
            padding: 14px 6px 5px 6px !important;
            border-radius: 14px !important;
            overflow: hidden !important;
            clip-path: inset(0 round 14px) !important;
            transition: transform 0.1s ease-out, border-color 0.15s ease, background 0.2s ease !important;
            background: ${state === 'on'
              ? 'rgba(255, 255, 255, 0.20)'
              : 'rgba(255, 255, 255, 0.12)'} !important;
            backdrop-filter: blur(3px) !important;
            -webkit-backdrop-filter: blur(3px) !important;
            border: ${state === 'on'
              ? '1px solid rgba(255, 149, 0, 0.6)'
              : '1px solid rgba(120, 120, 120, 0.55)'} !important;
            box-shadow: ${state === 'on'
              ? '0 2px 10px rgba(255, 149, 0, 0.10)'
              : 'none'} !important;
          }

          .bubble-button-card-container:active { transform: scale(0.95)
          !important; }

          .bubble-content-container {
            display: grid !important;
            grid-template-rows: auto auto 1fr !important;
            justify-items: center !important;
            width: 100% !important;
            position: relative !important;
            z-index: 5 !important;
            padding-bottom: 10px !important;
          }

          .bubble-button-card-container::after {
            content: '' !important;
            position: absolute !important;
            top: 5px !important;
            right: 5px !important;
            width: ${(hass.states['switch.adaptive_lighting_bedroom_primary']?.attributes?.manual_control?.length > 0) ? '7px' : '0px'} !important;
            height: ${(hass.states['switch.adaptive_lighting_bedroom_primary']?.attributes?.manual_control?.length > 0) ? '7px' : '0px'} !important;
            border-radius: 50% !important;
            background: rgb(255, 110, 90) !important;
            border: 1px solid rgba(255, 255, 255, 0.6) !important;
            box-shadow: 0 0 4px rgba(255, 110, 90, 0.5) !important;
            transition: width 0.2s ease, height 0.2s ease !important;
            z-index: 25 !important;
          }

          .bubble-icon-container {
            min-width: 28px !important;
            min-height: 28px !important;
            grid-row: 1 !important;
            margin: 8px 0 6px 0 !important;
            border-radius: 50% !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            background: ${state === 'on'
              ? 'rgba(255, 149, 0, 0.22)'
              : 'rgba(60, 60, 60, 0.30)'} !important;
            border: ${state === 'on'
              ? '1px solid rgba(255, 149, 0, 0.35)'
              : '1px solid rgba(60, 60, 60, 0.40)'} !important;
          }

          .bubble-icon {
            --mdc-icon-size: 20px !important;
            color: ${state === 'on'
              ? 'rgb(255, 149, 0)'
              : 'rgba(40, 40, 40, 0.80)'} !important;
            filter: ${state === 'on' ? 'drop-shadow(0 0 3px rgba(255, 149, 0, 0.35))' : 'none'} !important;
          }

          .bubble-name-container {
            grid-row: 2 !important;
            margin: 0 !important;
            width: 100% !important;
          }

          .bubble-name {
            font-weight: 700 !important;
            font-size: 14px !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
            line-height: 1.1 !important;
            justify-content: center !important;
            margin: 0 4px !important;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.6) !important;
            color: ${state === 'on'
              ? 'rgba(40, 40, 40, 0.95)'
              : 'rgba(50, 50, 50, 0.75)'} !important;
          }

          .bubble-state {
            font-size: 12px !important;
            font-weight: 600 !important;
            margin-top: 1px !important;
            justify-content: center !important;
            color: ${state === 'on'
              ? 'rgba(40, 40, 40, 0.95)'
              : 'rgba(60, 60, 60, 0.7)'} !important;
          }

          .bubble-attribute {
            font-size: 12px !important;
            font-weight: 600 !important;
            margin-top: 1px !important;
            justify-content: center !important;
            color: ${state === 'on'
              ? 'rgb(255, 149, 0)'
              : 'rgba(60, 60, 60, 0.7)'} !important;
          }

          .bubble-range-slider {
            position: absolute !important;
            bottom: 4px !important;
            left: 0 !important;
            right: 0 !important;
            margin: 0 auto !important;
            width: 60% !important;
            height: 3px !important;
            border-radius: 3px !important;
            z-index: 10 !important;
            background: ${state === 'on'
              ? 'rgba(0, 0, 0, 0.08)'
              : 'transparent'} !important;
            overflow: hidden !important;
            opacity: ${state === 'on' ? '1' : '0'} !important;
            transition: opacity 0.2s ease !important;
          }

          .bubble-range-fill {
            height: 3px !important;
            border-radius: 3px !important;
            background: rgb(255, 149, 0) !important;
          }

          .bubble-range-value {
            position: fixed !important;
            top: 4px !important;
            right: 5px !important;
            font-size: 9px !important;
            font-weight: 600 !important;
            color: rgba(50, 50, 50, 0.9) !important;
            opacity: 0 !important;
            transition: opacity 0.15s ease !important;
            z-index: 20 !important;
          }

          .is-dragging .bubble-range-value { opacity: 1 !important; }
          .is-dragging .bubble-attribute { opacity: 0 !important; }
    card_mod:
      style: |
        hui-horizontal-stack-card {
          display: block !important;
        }
        #root {
          display: flex !important;
          justify-content: center !important;
          align-items: stretch !important;
          gap: 14px !important;
          padding: 8px 20px !important;
        }
        #root > * {
          flex: 1 1 0px !important;
          max-width: 140px !important;
          min-width: 0px !important;
        }
  - type: horizontal-stack
    card_mod:
      style: |
        hui-horizontal-stack-card {
          display: block !important;
        }
        #root {
          display: flex !important;
          justify-content: center !important;
          align-items: stretch !important;
          gap: 14px !important;
          padding: 6px 20px 12px 20px !important;
        }
        #root > * {
          flex: 1 1 0px !important;
          max-width: 140px !important;
          min-width: 0px !important;
        }
    cards:
      - type: custom:bubble-card
        card_type: button
        button_type: slider
        entity: light.accent_spots_lights
        name: Spots
        icon: mdi:track-light
        show_state: false
        show_attribute: true
        attribute: brightness
        scrolling_effect: false
        tap_action:
          action: toggle
        hold_action:
          action: more-info
        double_tap_action:
          action: call-service
          service: light.turn_on
          target:
            entity_id: light.accent_spots_lights
          data:
            brightness_pct: 100
        card_mod:
          style: |
            ha-card {
              background: transparent !important;
              border: none !important;
              box-shadow: none !important;
              max-width: clamp(95px, 22vw, 140px) !important;
              margin: 0 auto !important;
            }
        styles: >-
          .bubble-button-card-container {
            position: relative !important;
            display: grid !important;
            grid-template-rows: auto auto 1fr auto !important;
            justify-items: center !important;
            align-items: center !important;
            text-align: center !important;
            min-height: 76px !important;
            padding: 14px 6px 5px 6px !important;
            border-radius: 14px !important;
            overflow: hidden !important;
            clip-path: inset(0 round 14px) !important;
            transition: transform 0.1s ease-out, border-color 0.15s ease, background 0.2s ease !important;
            background: ${state === 'on'
              ? 'rgba(255, 255, 255, 0.20)'
              : 'rgba(255, 255, 255, 0.12)'} !important;
            backdrop-filter: blur(3px) !important;
            -webkit-backdrop-filter: blur(3px) !important;
            border: ${state === 'on'
              ? '1px solid rgba(255, 149, 0, 0.6)'
              : '1px solid rgba(120, 120, 120, 0.55)'} !important;
            box-shadow: ${state === 'on'
              ? '0 2px 10px rgba(255, 149, 0, 0.10)'
              : 'none'} !important;
          }

          .bubble-button-card-container:active { transform: scale(0.95)
          !important; }

          .bubble-content-container {
            display: grid !important;
            grid-template-rows: auto auto 1fr !important;
            justify-items: center !important;
            width: 100% !important;
            position: relative !important;
            z-index: 5 !important;
            padding-bottom: 10px !important;
          }

          .bubble-button-card-container::after {
            content: '' !important;
            position: absolute !important;
            top: 5px !important;
            right: 5px !important;
            width: ${(hass.states['switch.adaptive_lighting_accent_spots']?.attributes?.manual_control?.length > 0) ? '7px' : '0px'} !important;
            height: ${(hass.states['switch.adaptive_lighting_accent_spots']?.attributes?.manual_control?.length > 0) ? '7px' : '0px'} !important;
            border-radius: 50% !important;
            background: rgb(255, 110, 90) !important;
            border: 1px solid rgba(255, 255, 255, 0.6) !important;
            box-shadow: 0 0 4px rgba(255, 110, 90, 0.5) !important;
            transition: width 0.2s ease, height 0.2s ease !important;
            z-index: 25 !important;
          }

          .bubble-icon-container {
            min-width: 28px !important;
            min-height: 28px !important;
            grid-row: 1 !important;
            margin: 8px 0 6px 0 !important;
            border-radius: 50% !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            background: ${state === 'on'
              ? 'rgba(255, 149, 0, 0.22)'
              : 'rgba(60, 60, 60, 0.30)'} !important;
            border: ${state === 'on'
              ? '1px solid rgba(255, 149, 0, 0.35)'
              : '1px solid rgba(60, 60, 60, 0.40)'} !important;
          }

          .bubble-icon {
            --mdc-icon-size: 20px !important;
            color: ${state === 'on'
              ? 'rgb(255, 149, 0)'
              : 'rgba(40, 40, 40, 0.80)'} !important;
            filter: ${state === 'on' ? 'drop-shadow(0 0 3px rgba(255, 149, 0, 0.35))' : 'none'} !important;
          }

          .bubble-name-container {
            grid-row: 2 !important;
            margin: 0 !important;
            width: 100% !important;
          }

          .bubble-name {
            font-weight: 700 !important;
            font-size: 14px !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
            line-height: 1.1 !important;
            justify-content: center !important;
            margin: 0 4px !important;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.6) !important;
            color: ${state === 'on'
              ? 'rgba(40, 40, 40, 0.95)'
              : 'rgba(50, 50, 50, 0.75)'} !important;
          }

          .bubble-state {
            font-size: 12px !important;
            font-weight: 600 !important;
            margin-top: 1px !important;
            justify-content: center !important;
            color: ${state === 'on'
              ? 'rgba(40, 40, 40, 0.95)'
              : 'rgba(60, 60, 60, 0.7)'} !important;
          }

          .bubble-attribute {
            font-size: 12px !important;
            font-weight: 600 !important;
            margin-top: 1px !important;
            justify-content: center !important;
            color: ${state === 'on'
              ? 'rgb(255, 149, 0)'
              : 'rgba(60, 60, 60, 0.7)'} !important;
          }

          .bubble-range-slider {
            position: absolute !important;
            bottom: 4px !important;
            left: 0 !important;
            right: 0 !important;
            margin: 0 auto !important;
            width: 60% !important;
            height: 3px !important;
            border-radius: 3px !important;
            z-index: 10 !important;
            background: ${state === 'on'
              ? 'rgba(0, 0, 0, 0.08)'
              : 'transparent'} !important;
            overflow: hidden !important;
            opacity: ${state === 'on' ? '1' : '0'} !important;
            transition: opacity 0.2s ease !important;
          }

          .bubble-range-fill {
            height: 3px !important;
            border-radius: 3px !important;
            background: rgb(255, 149, 0) !important;
          }

          .bubble-range-value {
            position: fixed !important;
            top: 4px !important;
            right: 5px !important;
            font-size: 9px !important;
            font-weight: 600 !important;
            color: rgba(50, 50, 50, 0.9) !important;
            opacity: 0 !important;
            transition: opacity 0.15s ease !important;
            z-index: 20 !important;
          }

          .is-dragging .bubble-range-value { opacity: 1 !important; }
          .is-dragging .bubble-attribute { opacity: 0 !important; }
      - type: custom:bubble-card
        card_type: button
        button_type: slider
        entity: light.overhead_lights
        name: Ceiling
        icon: mdi:ceiling-light
        show_state: false
        show_attribute: true
        attribute: brightness
        scrolling_effect: false
        tap_action:
          action: toggle
        hold_action:
          action: more-info
        double_tap_action:
          action: call-service
          service: light.turn_on
          target:
            entity_id: light.overhead_lights
          data:
            brightness_pct: 100
        card_mod:
          style: |
            ha-card {
              background: transparent !important;
              border: none !important;
              box-shadow: none !important;
              max-width: clamp(95px, 22vw, 140px) !important;
              margin: 0 auto !important;
            }
        styles: >-
          .bubble-button-card-container {
            position: relative !important;
            display: grid !important;
            grid-template-rows: auto auto 1fr auto !important;
            justify-items: center !important;
            align-items: center !important;
            text-align: center !important;
            min-height: 76px !important;
            padding: 14px 6px 5px 6px !important;
            border-radius: 14px !important;
            overflow: hidden !important;
            clip-path: inset(0 round 14px) !important;
            transition: transform 0.1s ease-out, border-color 0.15s ease, background 0.2s ease !important;
            background: ${state === 'on'
              ? 'rgba(255, 255, 255, 0.20)'
              : 'rgba(255, 255, 255, 0.12)'} !important;
            backdrop-filter: blur(3px) !important;
            -webkit-backdrop-filter: blur(3px) !important;
            border: ${state === 'on'
              ? '1px solid rgba(255, 149, 0, 0.6)'
              : '1px solid rgba(120, 120, 120, 0.55)'} !important;
            box-shadow: ${state === 'on'
              ? '0 2px 10px rgba(255, 149, 0, 0.10)'
              : 'none'} !important;
          }

          .bubble-button-card-container:active { transform: scale(0.95)
          !important; }

          .bubble-content-container {
            display: grid !important;
            grid-template-rows: auto auto 1fr !important;
            justify-items: center !important;
            width: 100% !important;
            position: relative !important;
            z-index: 5 !important;
            padding-bottom: 10px !important;
          }

          .bubble-button-card-container::after {
            content: '' !important;
            position: absolute !important;
            top: 5px !important;
            right: 5px !important;
            width: ${(hass.states['switch.adaptive_lighting_recessed_ceiling']?.attributes?.manual_control?.length > 0) ? '7px' : '0px'} !important;
            height: ${(hass.states['switch.adaptive_lighting_recessed_ceiling']?.attributes?.manual_control?.length > 0) ? '7px' : '0px'} !important;
            border-radius: 50% !important;
            background: rgb(255, 110, 90) !important;
            border: 1px solid rgba(255, 255, 255, 0.6) !important;
            box-shadow: 0 0 4px rgba(255, 110, 90, 0.5) !important;
            transition: width 0.2s ease, height 0.2s ease !important;
            z-index: 25 !important;
          }

          .bubble-icon-container {
            min-width: 28px !important;
            min-height: 28px !important;
            grid-row: 1 !important;
            margin: 8px 0 6px 0 !important;
            border-radius: 50% !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            background: ${state === 'on'
              ? 'rgba(255, 149, 0, 0.22)'
              : 'rgba(60, 60, 60, 0.30)'} !important;
            border: ${state === 'on'
              ? '1px solid rgba(255, 149, 0, 0.35)'
              : '1px solid rgba(60, 60, 60, 0.40)'} !important;
          }

          .bubble-icon {
            --mdc-icon-size: 20px !important;
            color: ${state === 'on'
              ? 'rgb(255, 149, 0)'
              : 'rgba(40, 40, 40, 0.80)'} !important;
            filter: ${state === 'on' ? 'drop-shadow(0 0 3px rgba(255, 149, 0, 0.35))' : 'none'} !important;
          }

          .bubble-name-container {
            grid-row: 2 !important;
            margin: 0 !important;
            width: 100% !important;
          }

          .bubble-name {
            font-weight: 700 !important;
            font-size: 14px !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
            line-height: 1.1 !important;
            justify-content: center !important;
            margin: 0 4px !important;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.6) !important;
            color: ${state === 'on'
              ? 'rgba(40, 40, 40, 0.95)'
              : 'rgba(50, 50, 50, 0.75)'} !important;
          }

          .bubble-state {
            font-size: 12px !important;
            font-weight: 600 !important;
            margin-top: 1px !important;
            justify-content: center !important;
            color: ${state === 'on'
              ? 'rgba(40, 40, 40, 0.95)'
              : 'rgba(60, 60, 60, 0.7)'} !important;
          }

          .bubble-attribute {
            font-size: 12px !important;
            font-weight: 600 !important;
            margin-top: 1px !important;
            justify-content: center !important;
            color: ${state === 'on'
              ? 'rgb(255, 149, 0)'
              : 'rgba(60, 60, 60, 0.7)'} !important;
          }

          .bubble-range-slider {
            position: absolute !important;
            bottom: 4px !important;
            left: 0 !important;
            right: 0 !important;
            margin: 0 auto !important;
            width: 60% !important;
            height: 3px !important;
            border-radius: 3px !important;
            z-index: 10 !important;
            background: ${state === 'on'
              ? 'rgba(0, 0, 0, 0.08)'
              : 'transparent'} !important;
            overflow: hidden !important;
            opacity: ${state === 'on' ? '1' : '0'} !important;
            transition: opacity 0.2s ease !important;
          }

          .bubble-range-fill {
            height: 3px !important;
            border-radius: 3px !important;
            background: rgb(255, 149, 0) !important;
          }

          .bubble-range-value {
            position: fixed !important;
            top: 4px !important;
            right: 5px !important;
            font-size: 9px !important;
            font-weight: 600 !important;
            color: rgba(50, 50, 50, 0.9) !important;
            opacity: 0 !important;
            transition: opacity 0.15s ease !important;
            z-index: 20 !important;
          }

          .is-dragging .bubble-range-value { opacity: 1 !important; }
          .is-dragging .bubble-attribute { opacity: 0 !important; }
      - type: custom:bubble-card
        card_type: button
        button_type: slider
        entity: light.column_lights
        name: Columns
        icon: mdi:pillar
        show_state: false
        show_attribute: true
        attribute: brightness
        scrolling_effect: false
        tap_action:
          action: toggle
        hold_action:
          action: more-info
        double_tap_action:
          action: call-service
          service: light.turn_on
          target:
            entity_id: light.column_lights
          data:
            brightness_pct: 100
        card_mod:
          style: |
            ha-card {
              background: transparent !important;
              border: none !important;
              box-shadow: none !important;
              max-width: clamp(95px, 22vw, 140px) !important;
              margin: 0 auto !important;
            }
        styles: >-
          .bubble-button-card-container {
            position: relative !important;
            display: grid !important;
            grid-template-rows: auto auto 1fr auto !important;
            justify-items: center !important;
            align-items: center !important;
            text-align: center !important;
            min-height: 76px !important;
            padding: 14px 6px 5px 6px !important;
            border-radius: 14px !important;
            overflow: hidden !important;
            clip-path: inset(0 round 14px) !important;
            transition: transform 0.1s ease-out, border-color 0.15s ease, background 0.2s ease !important;
            background: ${state === 'on'
              ? 'rgba(255, 255, 255, 0.20)'
              : 'rgba(255, 255, 255, 0.12)'} !important;
            backdrop-filter: blur(3px) !important;
            -webkit-backdrop-filter: blur(3px) !important;
            border: ${state === 'on'
              ? '1px solid rgba(255, 149, 0, 0.6)'
              : '1px solid rgba(120, 120, 120, 0.55)'} !important;
            box-shadow: ${state === 'on'
              ? '0 2px 10px rgba(255, 149, 0, 0.10)'
              : 'none'} !important;
          }

          .bubble-button-card-container:active { transform: scale(0.95)
          !important; }

          .bubble-content-container {
            display: grid !important;
            grid-template-rows: auto auto 1fr !important;
            justify-items: center !important;
            width: 100% !important;
            position: relative !important;
            z-index: 5 !important;
            padding-bottom: 10px !important;
          }

          .bubble-button-card-container::after {
            content: '' !important;
            position: absolute !important;
            top: 5px !important;
            right: 5px !important;
            width: ${(hass.states['switch.adaptive_lighting_column_lights']?.attributes?.manual_control?.length > 0) ? '7px' : '0px'} !important;
            height: ${(hass.states['switch.adaptive_lighting_column_lights']?.attributes?.manual_control?.length > 0) ? '7px' : '0px'} !important;
            border-radius: 50% !important;
            background: rgb(255, 110, 90) !important;
            border: 1px solid rgba(255, 255, 255, 0.6) !important;
            box-shadow: 0 0 4px rgba(255, 110, 90, 0.5) !important;
            transition: width 0.2s ease, height 0.2s ease !important;
            z-index: 25 !important;
          }

          .bubble-icon-container {
            min-width: 28px !important;
            min-height: 28px !important;
            grid-row: 1 !important;
            margin: 8px 0 6px 0 !important;
            border-radius: 50% !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            background: ${state === 'on'
              ? 'rgba(255, 149, 0, 0.22)'
              : 'rgba(60, 60, 60, 0.30)'} !important;
            border: ${state === 'on'
              ? '1px solid rgba(255, 149, 0, 0.35)'
              : '1px solid rgba(60, 60, 60, 0.40)'} !important;
          }

          .bubble-icon {
            --mdc-icon-size: 20px !important;
            color: ${state === 'on'
              ? 'rgb(255, 149, 0)'
              : 'rgba(40, 40, 40, 0.80)'} !important;
            filter: ${state === 'on' ? 'drop-shadow(0 0 3px rgba(255, 149, 0, 0.35))' : 'none'} !important;
          }

          .bubble-name-container {
            grid-row: 2 !important;
            margin: 0 !important;
            width: 100% !important;
          }

          .bubble-name {
            font-weight: 700 !important;
            font-size: 14px !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
            line-height: 1.1 !important;
            justify-content: center !important;
            margin: 0 4px !important;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.6) !important;
            color: ${state === 'on'
              ? 'rgba(40, 40, 40, 0.95)'
              : 'rgba(50, 50, 50, 0.75)'} !important;
          }

          .bubble-state {
            font-size: 12px !important;
            font-weight: 600 !important;
            margin-top: 1px !important;
            justify-content: center !important;
            color: ${state === 'on'
              ? 'rgba(40, 40, 40, 0.95)'
              : 'rgba(60, 60, 60, 0.7)'} !important;
          }

          .bubble-attribute {
            font-size: 12px !important;
            font-weight: 600 !important;
            margin-top: 1px !important;
            justify-content: center !important;
            color: ${state === 'on'
              ? 'rgb(255, 149, 0)'
              : 'rgba(60, 60, 60, 0.7)'} !important;
          }

          .bubble-range-slider {
            position: absolute !important;
            bottom: 4px !important;
            left: 0 !important;
            right: 0 !important;
            margin: 0 auto !important;
            width: 60% !important;
            height: 3px !important;
            border-radius: 3px !important;
            z-index: 10 !important;
            background: ${state === 'on'
              ? 'rgba(0, 0, 0, 0.08)'
              : 'transparent'} !important;
            overflow: hidden !important;
            opacity: ${state === 'on' ? '1' : '0'} !important;
            transition: opacity 0.2s ease !important;
          }

          .bubble-range-fill {
            height: 3px !important;
            border-radius: 3px !important;
            background: rgb(255, 149, 0) !important;
          }

          .bubble-range-value {
            position: fixed !important;
            top: 4px !important;
            right: 5px !important;
            font-size: 9px !important;
            font-weight: 600 !important;
            color: rgba(50, 50, 50, 0.9) !important;
            opacity: 0 !important;
            transition: opacity 0.15s ease !important;
            z-index: 20 !important;
          }

          .is-dragging .bubble-range-value { opacity: 1 !important; }
          .is-dragging .bubble-attribute { opacity: 0 !important; }
grid_options:
  columns: full
  rows: auto
card_mod:
  style: |
    :host {
      background: 
        radial-gradient(
          ellipse at center,
          rgba(255, 255, 255, 0.35) 0%,
          rgba(255, 255, 255, 0.22) 60%,
          rgba(0, 0, 0, 0.02) 100%
        ),
        url('/local/image/Room7.png') !important;
      backdrop-filter: blur(2px) !important;
      -webkit-backdrop-filter: blur(2px) !important;
      background-size: cover !important;
      background-position: center !important;
      border-radius: 28px !important;
      overflow: hidden !important;
      border: none !important;
      box-shadow: 0 4px 24px rgba(0, 0, 0, 0.08) !important;
      padding: 0 !important;
      display: block !important;
    }
