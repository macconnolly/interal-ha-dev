# ═══════════════════════════════════════════════════════════════════════════════
# HERO MUSIC CARD - Standalone Mobile Version
# ═══════════════════════════════════════════════════════════════════════════════
# Features:
# - Music separator with blue styling
# - Conditional media player cards based on input_select.hero_media_player_target
# - 6 speaker tiles: Living, Kitchen, Bedroom, Dining, Bath, Spotify
# - Room7.png background with rounded corners
# ═══════════════════════════════════════════════════════════════════════════════

type: vertical-stack
cards:
  # ═══════════════════════════════════════════════════════════════
  # MUSIC SEPARATOR
  # ═══════════════════════════════════════════════════════════════
  - type: custom:bubble-card
    card_type: separator
    name: Music
    icon: mdi:music
    styles: |
      .bubble-line {
        background: linear-gradient(90deg, rgba(66, 133, 244, 0.4), transparent) !important;
        opacity: 0.6 !important;
      }
      .bubble-name {
        font-size: 14px !important;
        font-weight: 700 !important;
        text-transform: uppercase !important;
        letter-spacing: 1.5px !important;
        color: rgba(60, 60, 60, 0.85) !important;
      }
      .bubble-icon {
        color: rgb(66, 133, 244) !important;
        --mdc-icon-size: 18px !important;
      }
      ha-card {
        background: transparent !important;
        border: none !important;
        padding: 6px 12px 2px 12px !important;
      }

  # ═══════════════════════════════════════════════════════════════
  # CONDITIONAL MEDIA PLAYER CARDS
  # ═══════════════════════════════════════════════════════════════
  - type: conditional
    conditions:
      - entity: input_select.hero_media_player_target
        state: media_player.living_room
    card:
      type: custom:bubble-card
      card_type: media-player
      entity: media_player.living_room
      name: Sonos
      icon: mdi:speaker-wireless
      card_layout: large-2-rows
      scrolling_effect: true
      show_state: true
      show_icon: true
      show_name: true
      show_last_changed: false
      show_attribute: false
      cover_background: true
      rows: 1.125
      hide:
        power_button: true
        previous_button: false
        next_button: false
        volume_button: false
        play_pause_button: false
      button_action:
        tap_action:
          action: more-info
      sub_button:
        main:
          - entity: input_select.hero_media_player_target
            sub_button_type: select
          - name: Group
            buttons_layout: inline
            group:
              - name: Ungroup
                icon: mdi:speaker-off
                entity: media_player.living_room
                show_state: false
                show_background: true
                state_background: false
                tap_action:
                  action: call-service
                  service: script.sonos_ungroup_all
              - name: Group all
                icon: mdi:speaker-multiple
                entity: media_player.living_room
                show_state: false
                show_background: true
                state_background: false
                tap_action:
                  action: call-service
                  service: script.sonos_group_all_to_playing
        bottom: []
        main_layout: rows
      styles: |
        :host {
          position: relative !important;
          z-index: 150 !important;
          overflow: visible !important;
        }
        ha-card {
          --bubble-border-radius: 16px;
          background: transparent !important;
          border: none !important;
          box-shadow: none !important;
          margin: 0 !important;
          padding: 4px 10px !important;
          overflow: visible !important;
        }
        .bubble-media-card-container {
          overflow: visible !important;
        }
        .bubble-media-cover {
          border-radius: 12px !important;
          opacity: 0.95 !important;
        }
        .bubble-title {
          color: rgba(255, 255, 255, 0.95) !important;
          font-size: 12px !important;
          font-weight: 600 !important;
          text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5) !important;
        }
        .bubble-sub-title {
          color: rgba(255, 255, 255, 0.75) !important;
          font-size: 10px !important;
          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4) !important;
        }
        .bubble-media-button {
          background: rgba(255, 255, 255, 0.18) !important;
          color: rgba(255, 255, 255, 0.95) !important;
          border: 1px solid rgba(255, 255, 255, 0.25) !important;
          border-radius: 50% !important;
          --mdc-icon-size: 16px !important;
        }
        .bubble-range-slider {
          background: rgba(255, 255, 255, 0.18) !important;
          border-radius: 4px !important;
        }
        .bubble-range-fill {
          background: rgb(66, 133, 244) !important;
          border-radius: 4px !important;
        }
        .bubble-sub-button-container {
          background: rgba(0, 0, 0, 0.25) !important;
          backdrop-filter: blur(4px) !important;
          border-radius: 8px !important;
          padding: 3px 6px !important;
          z-index: 200 !important;
          overflow: visible !important;
        }
        .bubble-sub-button-1,
        .bubble-sub-button-2,
        .bubble-sub-button-3 {
          background: rgba(255, 255, 255, 0.12) !important;
          border: 1px solid rgba(255, 255, 255, 0.20) !important;
          border-radius: 6px !important;
        }
        .bubble-sub-button-1 .bubble-sub-button-icon,
        .bubble-sub-button-2 .bubble-sub-button-icon,
        .bubble-sub-button-3 .bubble-sub-button-icon {
          color: rgba(255, 255, 255, 0.9) !important;
          --mdc-icon-size: 14px !important;
        }
        .bubble-dropdown-container,
        .bubble-dropdown-select,
        .bubble-dropdown-arrow {
          z-index: 300 !important;
        }

  - type: conditional
    conditions:
      - entity: input_select.hero_media_player_target
        state: media_player.kitchen
    card:
      type: custom:bubble-card
      card_type: media-player
      entity: media_player.kitchen
      name: Sonos
      icon: mdi:speaker-wireless
      card_layout: large-2-rows
      scrolling_effect: true
      show_state: true
      show_icon: true
      show_name: true
      show_last_changed: false
      show_attribute: false
      cover_background: true
      rows: 1.125
      hide:
        power_button: true
        previous_button: false
        next_button: false
        volume_button: false
        play_pause_button: false
      button_action:
        tap_action:
          action: more-info
      sub_button:
        main:
          - entity: input_select.hero_media_player_target
            sub_button_type: select
          - name: Group
            buttons_layout: inline
            group:
              - name: Ungroup
                icon: mdi:speaker-off
                entity: media_player.kitchen
                show_state: false
                show_background: true
                state_background: false
                tap_action:
                  action: call-service
                  service: script.sonos_ungroup_all
              - name: Group all
                icon: mdi:speaker-multiple
                entity: media_player.kitchen
                show_state: false
                show_background: true
                state_background: false
                tap_action:
                  action: call-service
                  service: script.sonos_group_all_to_playing
        bottom: []
        main_layout: rows
      styles: |
        :host {
          position: relative !important;
          z-index: 150 !important;
          overflow: visible !important;
        }
        ha-card {
          --bubble-border-radius: 16px;
          background: transparent !important;
          border: none !important;
          box-shadow: none !important;
          margin: 0 !important;
          padding: 4px 10px !important;
          overflow: visible !important;
        }
        .bubble-media-card-container {
          overflow: visible !important;
        }
        .bubble-media-cover {
          border-radius: 12px !important;
          opacity: 0.95 !important;
        }
        .bubble-title {
          color: rgba(255, 255, 255, 0.95) !important;
          font-size: 12px !important;
          font-weight: 600 !important;
          text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5) !important;
        }
        .bubble-sub-title {
          color: rgba(255, 255, 255, 0.75) !important;
          font-size: 10px !important;
          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4) !important;
        }
        .bubble-media-button {
          background: rgba(255, 255, 255, 0.18) !important;
          color: rgba(255, 255, 255, 0.95) !important;
          border: 1px solid rgba(255, 255, 255, 0.25) !important;
          border-radius: 50% !important;
          --mdc-icon-size: 16px !important;
        }
        .bubble-range-slider {
          background: rgba(255, 255, 255, 0.18) !important;
          border-radius: 4px !important;
        }
        .bubble-range-fill {
          background: rgb(66, 133, 244) !important;
          border-radius: 4px !important;
        }
        .bubble-sub-button-container {
          background: rgba(0, 0, 0, 0.25) !important;
          backdrop-filter: blur(4px) !important;
          border-radius: 8px !important;
          padding: 3px 6px !important;
          z-index: 200 !important;
          overflow: visible !important;
        }
        .bubble-sub-button-1,
        .bubble-sub-button-2,
        .bubble-sub-button-3 {
          background: rgba(255, 255, 255, 0.12) !important;
          border: 1px solid rgba(255, 255, 255, 0.20) !important;
          border-radius: 6px !important;
        }
        .bubble-sub-button-1 .bubble-sub-button-icon,
        .bubble-sub-button-2 .bubble-sub-button-icon,
        .bubble-sub-button-3 .bubble-sub-button-icon {
          color: rgba(255, 255, 255, 0.9) !important;
          --mdc-icon-size: 14px !important;
        }
        .bubble-dropdown-container,
        .bubble-dropdown-select,
        .bubble-dropdown-arrow {
          z-index: 300 !important;
        }

  - type: conditional
    conditions:
      - entity: input_select.hero_media_player_target
        state: media_player.bedroom
    card:
      type: custom:bubble-card
      card_type: media-player
      entity: media_player.bedroom
      name: Sonos
      icon: mdi:speaker-wireless
      card_layout: large-2-rows
      scrolling_effect: true
      show_state: true
      show_icon: true
      show_name: true
      show_last_changed: false
      show_attribute: false
      cover_background: true
      rows: 1.125
      hide:
        power_button: true
        previous_button: false
        next_button: false
        volume_button: false
        play_pause_button: false
      button_action:
        tap_action:
          action: more-info
      sub_button:
        main:
          - entity: input_select.hero_media_player_target
            sub_button_type: select
          - name: Group
            buttons_layout: inline
            group:
              - name: Ungroup
                icon: mdi:speaker-off
                entity: media_player.bedroom
                show_state: false
                show_background: true
                state_background: false
                tap_action:
                  action: call-service
                  service: script.sonos_ungroup_all
              - name: Group all
                icon: mdi:speaker-multiple
                entity: media_player.bedroom
                show_state: false
                show_background: true
                state_background: false
                tap_action:
                  action: call-service
                  service: script.sonos_group_all_to_playing
        bottom: []
        main_layout: rows
      styles: |
        :host {
          position: relative !important;
          z-index: 150 !important;
          overflow: visible !important;
        }
        ha-card {
          --bubble-border-radius: 16px;
          background: transparent !important;
          border: none !important;
          box-shadow: none !important;
          margin: 0 !important;
          padding: 4px 10px !important;
          overflow: visible !important;
        }
        .bubble-media-card-container {
          overflow: visible !important;
        }
        .bubble-media-cover {
          border-radius: 12px !important;
          opacity: 0.95 !important;
        }
        .bubble-title {
          color: rgba(255, 255, 255, 0.95) !important;
          font-size: 12px !important;
          font-weight: 600 !important;
          text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5) !important;
        }
        .bubble-sub-title {
          color: rgba(255, 255, 255, 0.75) !important;
          font-size: 10px !important;
          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4) !important;
        }
        .bubble-media-button {
          background: rgba(255, 255, 255, 0.18) !important;
          color: rgba(255, 255, 255, 0.95) !important;
          border: 1px solid rgba(255, 255, 255, 0.25) !important;
          border-radius: 50% !important;
          --mdc-icon-size: 16px !important;
        }
        .bubble-range-slider {
          background: rgba(255, 255, 255, 0.18) !important;
          border-radius: 4px !important;
        }
        .bubble-range-fill {
          background: rgb(66, 133, 244) !important;
          border-radius: 4px !important;
        }
        .bubble-sub-button-container {
          background: rgba(0, 0, 0, 0.25) !important;
          backdrop-filter: blur(4px) !important;
          border-radius: 8px !important;
          padding: 3px 6px !important;
          z-index: 200 !important;
          overflow: visible !important;
        }
        .bubble-sub-button-1,
        .bubble-sub-button-2,
        .bubble-sub-button-3 {
          background: rgba(255, 255, 255, 0.12) !important;
          border: 1px solid rgba(255, 255, 255, 0.20) !important;
          border-radius: 6px !important;
        }
        .bubble-sub-button-1 .bubble-sub-button-icon,
        .bubble-sub-button-2 .bubble-sub-button-icon,
        .bubble-sub-button-3 .bubble-sub-button-icon {
          color: rgba(255, 255, 255, 0.9) !important;
          --mdc-icon-size: 14px !important;
        }
        .bubble-dropdown-container,
        .bubble-dropdown-select,
        .bubble-dropdown-arrow {
          z-index: 300 !important;
        }

  - type: conditional
    conditions:
      - entity: input_select.hero_media_player_target
        state: media_player.dining_room
    card:
      type: custom:bubble-card
      card_type: media-player
      entity: media_player.dining_room
      name: Sonos
      icon: mdi:speaker-wireless
      card_layout: large-2-rows
      scrolling_effect: true
      show_state: true
      show_icon: true
      show_name: true
      show_last_changed: false
      show_attribute: false
      cover_background: true
      rows: 1.125
      hide:
        power_button: true
        previous_button: false
        next_button: false
        volume_button: false
        play_pause_button: false
      button_action:
        tap_action:
          action: more-info
      sub_button:
        main:
          - entity: input_select.hero_media_player_target
            sub_button_type: select
          - name: Group
            buttons_layout: inline
            group:
              - name: Ungroup
                icon: mdi:speaker-off
                entity: media_player.dining_room
                show_state: false
                show_background: true
                state_background: false
                tap_action:
                  action: call-service
                  service: script.sonos_ungroup_all
              - name: Group all
                icon: mdi:speaker-multiple
                entity: media_player.dining_room
                show_state: false
                show_background: true
                state_background: false
                tap_action:
                  action: call-service
                  service: script.sonos_group_all_to_playing
        bottom: []
        main_layout: rows
      styles: |
        :host {
          position: relative !important;
          z-index: 150 !important;
          overflow: visible !important;
        }
        ha-card {
          --bubble-border-radius: 16px;
          background: transparent !important;
          border: none !important;
          box-shadow: none !important;
          margin: 0 !important;
          padding: 4px 10px !important;
          overflow: visible !important;
        }
        .bubble-media-card-container {
          overflow: visible !important;
        }
        .bubble-media-cover {
          border-radius: 12px !important;
          opacity: 0.95 !important;
        }
        .bubble-title {
          color: rgba(255, 255, 255, 0.95) !important;
          font-size: 12px !important;
          font-weight: 600 !important;
          text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5) !important;
        }
        .bubble-sub-title {
          color: rgba(255, 255, 255, 0.75) !important;
          font-size: 10px !important;
          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4) !important;
        }
        .bubble-media-button {
          background: rgba(255, 255, 255, 0.18) !important;
          color: rgba(255, 255, 255, 0.95) !important;
          border: 1px solid rgba(255, 255, 255, 0.25) !important;
          border-radius: 50% !important;
          --mdc-icon-size: 16px !important;
        }
        .bubble-range-slider {
          background: rgba(255, 255, 255, 0.18) !important;
          border-radius: 4px !important;
        }
        .bubble-range-fill {
          background: rgb(66, 133, 244) !important;
          border-radius: 4px !important;
        }
        .bubble-sub-button-container {
          background: rgba(0, 0, 0, 0.25) !important;
          backdrop-filter: blur(4px) !important;
          border-radius: 8px !important;
          padding: 3px 6px !important;
          z-index: 200 !important;
          overflow: visible !important;
        }
        .bubble-sub-button-1,
        .bubble-sub-button-2,
        .bubble-sub-button-3 {
          background: rgba(255, 255, 255, 0.12) !important;
          border: 1px solid rgba(255, 255, 255, 0.20) !important;
          border-radius: 6px !important;
        }
        .bubble-sub-button-1 .bubble-sub-button-icon,
        .bubble-sub-button-2 .bubble-sub-button-icon,
        .bubble-sub-button-3 .bubble-sub-button-icon {
          color: rgba(255, 255, 255, 0.9) !important;
          --mdc-icon-size: 14px !important;
        }
        .bubble-dropdown-container,
        .bubble-dropdown-select,
        .bubble-dropdown-arrow {
          z-index: 300 !important;
        }

  - type: conditional
    conditions:
      - entity: input_select.hero_media_player_target
        state: media_player.bath
    card:
      type: custom:bubble-card
      card_type: media-player
      entity: media_player.bath
      name: Sonos
      icon: mdi:speaker-wireless
      card_layout: large-2-rows
      scrolling_effect: true
      show_state: true
      show_icon: true
      show_name: true
      show_last_changed: false
      show_attribute: false
      cover_background: true
      rows: 1.125
      hide:
        power_button: true
        previous_button: false
        next_button: false
        volume_button: false
        play_pause_button: false
      button_action:
        tap_action:
          action: more-info
      sub_button:
        main:
          - entity: input_select.hero_media_player_target
            sub_button_type: select
          - name: Group
            buttons_layout: inline
            group:
              - name: Ungroup
                icon: mdi:speaker-off
                entity: media_player.bath
                show_state: false
                show_background: true
                state_background: false
                tap_action:
                  action: call-service
                  service: script.sonos_ungroup_all
              - name: Group all
                icon: mdi:speaker-multiple
                entity: media_player.bath
                show_state: false
                show_background: true
                state_background: false
                tap_action:
                  action: call-service
                  service: script.sonos_group_all_to_playing
        bottom: []
        main_layout: rows
      styles: |
        :host {
          position: relative !important;
          z-index: 150 !important;
          overflow: visible !important;
        }
        ha-card {
          --bubble-border-radius: 16px;
          background: transparent !important;
          border: none !important;
          box-shadow: none !important;
          margin: 0 !important;
          padding: 4px 10px !important;
          overflow: visible !important;
        }
        .bubble-media-card-container {
          overflow: visible !important;
        }
        .bubble-media-cover {
          border-radius: 12px !important;
          opacity: 0.95 !important;
        }
        .bubble-title {
          color: rgba(255, 255, 255, 0.95) !important;
          font-size: 12px !important;
          font-weight: 600 !important;
          text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5) !important;
        }
        .bubble-sub-title {
          color: rgba(255, 255, 255, 0.75) !important;
          font-size: 10px !important;
          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4) !important;
        }
        .bubble-media-button {
          background: rgba(255, 255, 255, 0.18) !important;
          color: rgba(255, 255, 255, 0.95) !important;
          border: 1px solid rgba(255, 255, 255, 0.25) !important;
          border-radius: 50% !important;
          --mdc-icon-size: 16px !important;
        }
        .bubble-range-slider {
          background: rgba(255, 255, 255, 0.18) !important;
          border-radius: 4px !important;
        }
        .bubble-range-fill {
          background: rgb(66, 133, 244) !important;
          border-radius: 4px !important;
        }
        .bubble-sub-button-container {
          background: rgba(0, 0, 0, 0.25) !important;
          backdrop-filter: blur(4px) !important;
          border-radius: 8px !important;
          padding: 3px 6px !important;
          z-index: 200 !important;
          overflow: visible !important;
        }
        .bubble-sub-button-1,
        .bubble-sub-button-2,
        .bubble-sub-button-3 {
          background: rgba(255, 255, 255, 0.12) !important;
          border: 1px solid rgba(255, 255, 255, 0.20) !important;
          border-radius: 6px !important;
        }
        .bubble-sub-button-1 .bubble-sub-button-icon,
        .bubble-sub-button-2 .bubble-sub-button-icon,
        .bubble-sub-button-3 .bubble-sub-button-icon {
          color: rgba(255, 255, 255, 0.9) !important;
          --mdc-icon-size: 14px !important;
        }
        .bubble-dropdown-container,
        .bubble-dropdown-select,
        .bubble-dropdown-arrow {
          z-index: 300 !important;
        }

  # ═══════════════════════════════════════════════════════════════
  # SPEAKER TILES GRID
  # ═══════════════════════════════════════════════════════════════
  - type: custom:layout-card
    layout_type: custom:grid-layout
    layout:
      grid-template-columns: repeat(3, 1fr)
      gap: 8px
      padding: 4px 10px 8px 10px
    cards:
      # Living Room Speaker
      - type: custom:bubble-card
        card_type: button
        button_type: slider
        entity: media_player.living_room
        name: Living
        icon: mdi:sofa
        show_state: false
        show_attribute: true
        attribute: volume_level
        scrolling_effect: false
        tap_action:
          action: call-service
          service: script.sonos_toggle_group_membership
          data:
            target_speaker: media_player.living_room
        hold_action:
          action: more-info
        double_tap_action:
          action: call-service
          service: media_player.volume_set
          target:
            entity_id: media_player.living_room
          data:
            volume_level: 0.3
        card_mod:
          style: |
            ha-card {
              background: transparent !important;
              border: none !important;
              box-shadow: none !important;
            }
        styles: |-
          ${(() => {
            const inGroup = hass.states['binary_sensor.sonos_living_room_in_playing_group']?.state === 'on';
            return `
              .bubble-button-card-container {
                position: relative !important;
                display: grid !important;
                grid-template-rows: auto auto 1fr auto !important;
                justify-items: center !important;
                align-items: center !important;
                text-align: center !important;
                min-height: 76px !important;
                padding: 14px 6px 5px 6px !important;
                border-radius: 14px !important;
                overflow: hidden !important;
                clip-path: inset(0 round 14px) !important;
                transition: transform 0.1s ease-out, border-color 0.15s ease, background 0.2s ease !important;
                background: ${inGroup
                  ? 'rgba(66, 133, 244, 0.15)'
                  : 'rgba(255, 255, 255, 0.12)'} !important;
                backdrop-filter: blur(3px) !important;
                -webkit-backdrop-filter: blur(3px) !important;
                border: ${inGroup
                  ? '1px solid rgba(66, 133, 244, 0.6)'
                  : '1px solid rgba(120, 120, 120, 0.55)'} !important;
                box-shadow: ${inGroup
                  ? '0 2px 10px rgba(66, 133, 244, 0.10)'
                  : 'none'} !important;
              }

              .bubble-button-card-container:active { transform: scale(0.95) !important; }

              .bubble-content-container {
                display: grid !important;
                grid-template-rows: auto auto 1fr !important;
                justify-items: center !important;
                width: 100% !important;
                position: relative !important;
                z-index: 5 !important;
                padding-bottom: 10px !important;
              }

              .bubble-icon-container {
                min-width: 28px !important;
                min-height: 28px !important;
                grid-row: 1 !important;
                margin: 8px 0 6px 0 !important;
                border-radius: 50% !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                background: ${inGroup
                  ? 'rgba(66, 133, 244, 0.22)'
                  : 'rgba(60, 60, 60, 0.30)'} !important;
                border: ${inGroup
                  ? '1px solid rgba(66, 133, 244, 0.35)'
                  : '1px solid rgba(60, 60, 60, 0.40)'} !important;
              }

              .bubble-icon {
                --mdc-icon-size: 20px !important;
                color: ${inGroup
                  ? 'rgb(66, 133, 244)'
                  : 'rgba(40, 40, 40, 0.80)'} !important;
                filter: ${inGroup ? 'drop-shadow(0 0 3px rgba(66, 133, 244, 0.35))' : 'none'} !important;
              }

              .bubble-name-container {
                grid-row: 2 !important;
                margin: 0 !important;
                width: 100% !important;
              }

              .bubble-name {
                font-weight: 700 !important;
                font-size: 14px !important;
                text-transform: uppercase !important;
                letter-spacing: 0.5px !important;
                line-height: 1.1 !important;
                justify-content: center !important;
                margin: 0 4px !important;
                text-shadow: 0 1px 2px rgba(255, 255, 255, 0.6) !important;
                color: ${inGroup
                  ? 'rgba(40, 40, 40, 0.95)'
                  : 'rgba(50, 50, 50, 0.75)'} !important;
              }

              .bubble-attribute {
                font-size: 12px !important;
                font-weight: 600 !important;
                margin-top: 1px !important;
                justify-content: center !important;
                color: ${inGroup
                  ? 'rgb(66, 133, 244)'
                  : 'rgba(60, 60, 60, 0.7)'} !important;
              }

              .bubble-range-slider {
                position: absolute !important;
                bottom: 4px !important;
                left: 0 !important;
                right: 0 !important;
                margin: 0 auto !important;
                width: 60% !important;
                height: 3px !important;
                border-radius: 3px !important;
                z-index: 10 !important;
                background: ${inGroup
                  ? 'rgba(0, 0, 0, 0.08)'
                  : 'transparent'} !important;
                overflow: hidden !important;
                opacity: ${inGroup ? '1' : '0.5'} !important;
                transition: opacity 0.2s ease !important;
              }

              .bubble-range-fill {
                height: 3px !important;
                border-radius: 3px !important;
                background: rgb(66, 133, 244) !important;
              }

              .bubble-range-value {
                position: fixed !important;
                top: 4px !important;
                right: 5px !important;
                font-size: 9px !important;
                font-weight: 600 !important;
                color: rgba(50, 50, 50, 0.9) !important;
                opacity: 0 !important;
                transition: opacity 0.15s ease !important;
                z-index: 20 !important;
              }

              .is-dragging .bubble-range-value { opacity: 1 !important; }
              .is-dragging .bubble-attribute { opacity: 0 !important; }
            `;
          })()}

      # Kitchen Speaker
      - type: custom:bubble-card
        card_type: button
        button_type: slider
        entity: media_player.kitchen
        name: Kitchen
        icon: mdi:stove
        show_state: false
        show_attribute: true
        attribute: volume_level
        scrolling_effect: false
        tap_action:
          action: call-service
          service: script.sonos_toggle_group_membership
          data:
            target_speaker: media_player.kitchen
        hold_action:
          action: more-info
        double_tap_action:
          action: call-service
          service: media_player.volume_set
          target:
            entity_id: media_player.kitchen
          data:
            volume_level: 0.3
        card_mod:
          style: |
            ha-card {
              background: transparent !important;
              border: none !important;
              box-shadow: none !important;
            }
        styles: |-
          ${(() => {
            const inGroup = hass.states['binary_sensor.sonos_kitchen_in_playing_group']?.state === 'on';
            return `
              .bubble-button-card-container {
                position: relative !important;
                display: grid !important;
                grid-template-rows: auto auto 1fr auto !important;
                justify-items: center !important;
                align-items: center !important;
                text-align: center !important;
                min-height: 76px !important;
                padding: 14px 6px 5px 6px !important;
                border-radius: 14px !important;
                overflow: hidden !important;
                clip-path: inset(0 round 14px) !important;
                transition: transform 0.1s ease-out, border-color 0.15s ease, background 0.2s ease !important;
                background: ${inGroup
                  ? 'rgba(66, 133, 244, 0.15)'
                  : 'rgba(255, 255, 255, 0.12)'} !important;
                backdrop-filter: blur(3px) !important;
                -webkit-backdrop-filter: blur(3px) !important;
                border: ${inGroup
                  ? '1px solid rgba(66, 133, 244, 0.6)'
                  : '1px solid rgba(120, 120, 120, 0.55)'} !important;
                box-shadow: ${inGroup
                  ? '0 2px 10px rgba(66, 133, 244, 0.10)'
                  : 'none'} !important;
              }

              .bubble-button-card-container:active { transform: scale(0.95) !important; }

              .bubble-content-container {
                display: grid !important;
                grid-template-rows: auto auto 1fr !important;
                justify-items: center !important;
                width: 100% !important;
                position: relative !important;
                z-index: 5 !important;
                padding-bottom: 10px !important;
              }

              .bubble-icon-container {
                min-width: 28px !important;
                min-height: 28px !important;
                grid-row: 1 !important;
                margin: 8px 0 6px 0 !important;
                border-radius: 50% !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                background: ${inGroup
                  ? 'rgba(66, 133, 244, 0.22)'
                  : 'rgba(60, 60, 60, 0.30)'} !important;
                border: ${inGroup
                  ? '1px solid rgba(66, 133, 244, 0.35)'
                  : '1px solid rgba(60, 60, 60, 0.40)'} !important;
              }

              .bubble-icon {
                --mdc-icon-size: 20px !important;
                color: ${inGroup
                  ? 'rgb(66, 133, 244)'
                  : 'rgba(40, 40, 40, 0.80)'} !important;
                filter: ${inGroup ? 'drop-shadow(0 0 3px rgba(66, 133, 244, 0.35))' : 'none'} !important;
              }

              .bubble-name-container {
                grid-row: 2 !important;
                margin: 0 !important;
                width: 100% !important;
              }

              .bubble-name {
                font-weight: 700 !important;
                font-size: 14px !important;
                text-transform: uppercase !important;
                letter-spacing: 0.5px !important;
                line-height: 1.1 !important;
                justify-content: center !important;
                margin: 0 4px !important;
                text-shadow: 0 1px 2px rgba(255, 255, 255, 0.6) !important;
                color: ${inGroup
                  ? 'rgba(40, 40, 40, 0.95)'
                  : 'rgba(50, 50, 50, 0.75)'} !important;
              }

              .bubble-attribute {
                font-size: 12px !important;
                font-weight: 600 !important;
                margin-top: 1px !important;
                justify-content: center !important;
                color: ${inGroup
                  ? 'rgb(66, 133, 244)'
                  : 'rgba(60, 60, 60, 0.7)'} !important;
              }

              .bubble-range-slider {
                position: absolute !important;
                bottom: 4px !important;
                left: 0 !important;
                right: 0 !important;
                margin: 0 auto !important;
                width: 60% !important;
                height: 3px !important;
                border-radius: 3px !important;
                z-index: 10 !important;
                background: ${inGroup
                  ? 'rgba(0, 0, 0, 0.08)'
                  : 'transparent'} !important;
                overflow: hidden !important;
                opacity: ${inGroup ? '1' : '0.5'} !important;
                transition: opacity 0.2s ease !important;
              }

              .bubble-range-fill {
                height: 3px !important;
                border-radius: 3px !important;
                background: rgb(66, 133, 244) !important;
              }

              .bubble-range-value {
                position: fixed !important;
                top: 4px !important;
                right: 5px !important;
                font-size: 9px !important;
                font-weight: 600 !important;
                color: rgba(50, 50, 50, 0.9) !important;
                opacity: 0 !important;
                transition: opacity 0.15s ease !important;
                z-index: 20 !important;
              }

              .is-dragging .bubble-range-value { opacity: 1 !important; }
              .is-dragging .bubble-attribute { opacity: 0 !important; }
            `;
          })()}

      # Bedroom Speaker
      - type: custom:bubble-card
        card_type: button
        button_type: slider
        entity: media_player.bedroom
        name: Bedroom
        icon: mdi:bed
        show_state: false
        show_attribute: true
        attribute: volume_level
        scrolling_effect: false
        tap_action:
          action: call-service
          service: script.sonos_toggle_group_membership
          data:
            target_speaker: media_player.bedroom
        hold_action:
          action: more-info
        double_tap_action:
          action: call-service
          service: media_player.volume_set
          target:
            entity_id: media_player.bedroom
          data:
            volume_level: 0.3
        card_mod:
          style: |
            ha-card {
              background: transparent !important;
              border: none !important;
              box-shadow: none !important;
            }
        styles: |-
          ${(() => {
            const inGroup = hass.states['binary_sensor.sonos_bedroom_in_playing_group']?.state === 'on';
            return `
              .bubble-button-card-container {
                position: relative !important;
                display: grid !important;
                grid-template-rows: auto auto 1fr auto !important;
                justify-items: center !important;
                align-items: center !important;
                text-align: center !important;
                min-height: 76px !important;
                padding: 14px 6px 5px 6px !important;
                border-radius: 14px !important;
                overflow: hidden !important;
                clip-path: inset(0 round 14px) !important;
                transition: transform 0.1s ease-out, border-color 0.15s ease, background 0.2s ease !important;
                background: ${inGroup
                  ? 'rgba(66, 133, 244, 0.15)'
                  : 'rgba(255, 255, 255, 0.12)'} !important;
                backdrop-filter: blur(3px) !important;
                -webkit-backdrop-filter: blur(3px) !important;
                border: ${inGroup
                  ? '1px solid rgba(66, 133, 244, 0.6)'
                  : '1px solid rgba(120, 120, 120, 0.55)'} !important;
                box-shadow: ${inGroup
                  ? '0 2px 10px rgba(66, 133, 244, 0.10)'
                  : 'none'} !important;
              }

              .bubble-button-card-container:active { transform: scale(0.95) !important; }

              .bubble-content-container {
                display: grid !important;
                grid-template-rows: auto auto 1fr !important;
                justify-items: center !important;
                width: 100% !important;
                position: relative !important;
                z-index: 5 !important;
                padding-bottom: 10px !important;
              }

              .bubble-icon-container {
                min-width: 28px !important;
                min-height: 28px !important;
                grid-row: 1 !important;
                margin: 8px 0 6px 0 !important;
                border-radius: 50% !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                background: ${inGroup
                  ? 'rgba(66, 133, 244, 0.22)'
                  : 'rgba(60, 60, 60, 0.30)'} !important;
                border: ${inGroup
                  ? '1px solid rgba(66, 133, 244, 0.35)'
                  : '1px solid rgba(60, 60, 60, 0.40)'} !important;
              }

              .bubble-icon {
                --mdc-icon-size: 20px !important;
                color: ${inGroup
                  ? 'rgb(66, 133, 244)'
                  : 'rgba(40, 40, 40, 0.80)'} !important;
                filter: ${inGroup ? 'drop-shadow(0 0 3px rgba(66, 133, 244, 0.35))' : 'none'} !important;
              }

              .bubble-name-container {
                grid-row: 2 !important;
                margin: 0 !important;
                width: 100% !important;
              }

              .bubble-name {
                font-weight: 700 !important;
                font-size: 14px !important;
                text-transform: uppercase !important;
                letter-spacing: 0.5px !important;
                line-height: 1.1 !important;
                justify-content: center !important;
                margin: 0 4px !important;
                text-shadow: 0 1px 2px rgba(255, 255, 255, 0.6) !important;
                color: ${inGroup
                  ? 'rgba(40, 40, 40, 0.95)'
                  : 'rgba(50, 50, 50, 0.75)'} !important;
              }

              .bubble-attribute {
                font-size: 12px !important;
                font-weight: 600 !important;
                margin-top: 1px !important;
                justify-content: center !important;
                color: ${inGroup
                  ? 'rgb(66, 133, 244)'
                  : 'rgba(60, 60, 60, 0.7)'} !important;
              }

              .bubble-range-slider {
                position: absolute !important;
                bottom: 4px !important;
                left: 0 !important;
                right: 0 !important;
                margin: 0 auto !important;
                width: 60% !important;
                height: 3px !important;
                border-radius: 3px !important;
                z-index: 10 !important;
                background: ${inGroup
                  ? 'rgba(0, 0, 0, 0.08)'
                  : 'transparent'} !important;
                overflow: hidden !important;
                opacity: ${inGroup ? '1' : '0.5'} !important;
                transition: opacity 0.2s ease !important;
              }

              .bubble-range-fill {
                height: 3px !important;
                border-radius: 3px !important;
                background: rgb(66, 133, 244) !important;
              }

              .bubble-range-value {
                position: fixed !important;
                top: 4px !important;
                right: 5px !important;
                font-size: 9px !important;
                font-weight: 600 !important;
                color: rgba(50, 50, 50, 0.9) !important;
                opacity: 0 !important;
                transition: opacity 0.15s ease !important;
                z-index: 20 !important;
              }

              .is-dragging .bubble-range-value { opacity: 1 !important; }
              .is-dragging .bubble-attribute { opacity: 0 !important; }
            `;
          })()}

      # Dining Room Speaker
      - type: custom:bubble-card
        card_type: button
        button_type: slider
        entity: media_player.dining_room
        name: Dining
        icon: mdi:table-furniture
        show_state: false
        show_attribute: true
        attribute: volume_level
        scrolling_effect: false
        tap_action:
          action: call-service
          service: script.sonos_toggle_group_membership
          data:
            target_speaker: media_player.dining_room
        hold_action:
          action: more-info
        double_tap_action:
          action: call-service
          service: media_player.volume_set
          target:
            entity_id: media_player.dining_room
          data:
            volume_level: 0.3
        card_mod:
          style: |
            ha-card {
              background: transparent !important;
              border: none !important;
              box-shadow: none !important;
            }
        styles: |-
          ${(() => {
            const inGroup = hass.states['binary_sensor.sonos_dining_room_in_playing_group']?.state === 'on';
            return `
              .bubble-button-card-container {
                position: relative !important;
                display: grid !important;
                grid-template-rows: auto auto 1fr auto !important;
                justify-items: center !important;
                align-items: center !important;
                text-align: center !important;
                min-height: 76px !important;
                padding: 14px 6px 5px 6px !important;
                border-radius: 14px !important;
                overflow: hidden !important;
                clip-path: inset(0 round 14px) !important;
                transition: transform 0.1s ease-out, border-color 0.15s ease, background 0.2s ease !important;
                background: ${inGroup
                  ? 'rgba(66, 133, 244, 0.15)'
                  : 'rgba(255, 255, 255, 0.12)'} !important;
                backdrop-filter: blur(3px) !important;
                -webkit-backdrop-filter: blur(3px) !important;
                border: ${inGroup
                  ? '1px solid rgba(66, 133, 244, 0.6)'
                  : '1px solid rgba(120, 120, 120, 0.55)'} !important;
                box-shadow: ${inGroup
                  ? '0 2px 10px rgba(66, 133, 244, 0.10)'
                  : 'none'} !important;
              }

              .bubble-button-card-container:active { transform: scale(0.95) !important; }

              .bubble-content-container {
                display: grid !important;
                grid-template-rows: auto auto 1fr !important;
                justify-items: center !important;
                width: 100% !important;
                position: relative !important;
                z-index: 5 !important;
                padding-bottom: 10px !important;
              }

              .bubble-icon-container {
                min-width: 28px !important;
                min-height: 28px !important;
                grid-row: 1 !important;
                margin: 8px 0 6px 0 !important;
                border-radius: 50% !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                background: ${inGroup
                  ? 'rgba(66, 133, 244, 0.22)'
                  : 'rgba(60, 60, 60, 0.30)'} !important;
                border: ${inGroup
                  ? '1px solid rgba(66, 133, 244, 0.35)'
                  : '1px solid rgba(60, 60, 60, 0.40)'} !important;
              }

              .bubble-icon {
                --mdc-icon-size: 20px !important;
                color: ${inGroup
                  ? 'rgb(66, 133, 244)'
                  : 'rgba(40, 40, 40, 0.80)'} !important;
                filter: ${inGroup ? 'drop-shadow(0 0 3px rgba(66, 133, 244, 0.35))' : 'none'} !important;
              }

              .bubble-name-container {
                grid-row: 2 !important;
                margin: 0 !important;
                width: 100% !important;
              }

              .bubble-name {
                font-weight: 700 !important;
                font-size: 14px !important;
                text-transform: uppercase !important;
                letter-spacing: 0.5px !important;
                line-height: 1.1 !important;
                justify-content: center !important;
                margin: 0 4px !important;
                text-shadow: 0 1px 2px rgba(255, 255, 255, 0.6) !important;
                color: ${inGroup
                  ? 'rgba(40, 40, 40, 0.95)'
                  : 'rgba(50, 50, 50, 0.75)'} !important;
              }

              .bubble-attribute {
                font-size: 12px !important;
                font-weight: 600 !important;
                margin-top: 1px !important;
                justify-content: center !important;
                color: ${inGroup
                  ? 'rgb(66, 133, 244)'
                  : 'rgba(60, 60, 60, 0.7)'} !important;
              }

              .bubble-range-slider {
                position: absolute !important;
                bottom: 4px !important;
                left: 0 !important;
                right: 0 !important;
                margin: 0 auto !important;
                width: 60% !important;
                height: 3px !important;
                border-radius: 3px !important;
                z-index: 10 !important;
                background: ${inGroup
                  ? 'rgba(0, 0, 0, 0.08)'
                  : 'transparent'} !important;
                overflow: hidden !important;
                opacity: ${inGroup ? '1' : '0.5'} !important;
                transition: opacity 0.2s ease !important;
              }

              .bubble-range-fill {
                height: 3px !important;
                border-radius: 3px !important;
                background: rgb(66, 133, 244) !important;
              }

              .bubble-range-value {
                position: fixed !important;
                top: 4px !important;
                right: 5px !important;
                font-size: 9px !important;
                font-weight: 600 !important;
                color: rgba(50, 50, 50, 0.9) !important;
                opacity: 0 !important;
                transition: opacity 0.15s ease !important;
                z-index: 20 !important;
              }

              .is-dragging .bubble-range-value { opacity: 1 !important; }
              .is-dragging .bubble-attribute { opacity: 0 !important; }
            `;
          })()}

      # Bath Speaker
      - type: custom:bubble-card
        card_type: button
        button_type: slider
        entity: media_player.bath
        name: Bath
        icon: mdi:shower-head
        show_state: false
        show_attribute: true
        attribute: volume_level
        scrolling_effect: false
        tap_action:
          action: call-service
          service: script.sonos_toggle_group_membership
          data:
            target_speaker: media_player.bath
        hold_action:
          action: more-info
        double_tap_action:
          action: call-service
          service: media_player.volume_set
          target:
            entity_id: media_player.bath
          data:
            volume_level: 0.3
        card_mod:
          style: |
            ha-card {
              background: transparent !important;
              border: none !important;
              box-shadow: none !important;
            }
        styles: |-
          ${(() => {
            const inGroup = hass.states['binary_sensor.sonos_bath_in_playing_group']?.state === 'on';
            return `
              .bubble-button-card-container {
                position: relative !important;
                display: grid !important;
                grid-template-rows: auto auto 1fr auto !important;
                justify-items: center !important;
                align-items: center !important;
                text-align: center !important;
                min-height: 76px !important;
                padding: 14px 6px 5px 6px !important;
                border-radius: 14px !important;
                overflow: hidden !important;
                clip-path: inset(0 round 14px) !important;
                transition: transform 0.1s ease-out, border-color 0.15s ease, background 0.2s ease !important;
                background: ${inGroup
                  ? 'rgba(66, 133, 244, 0.15)'
                  : 'rgba(255, 255, 255, 0.12)'} !important;
                backdrop-filter: blur(3px) !important;
                -webkit-backdrop-filter: blur(3px) !important;
                border: ${inGroup
                  ? '1px solid rgba(66, 133, 244, 0.6)'
                  : '1px solid rgba(120, 120, 120, 0.55)'} !important;
                box-shadow: ${inGroup
                  ? '0 2px 10px rgba(66, 133, 244, 0.10)'
                  : 'none'} !important;
              }

              .bubble-button-card-container:active { transform: scale(0.95) !important; }

              .bubble-content-container {
                display: grid !important;
                grid-template-rows: auto auto 1fr !important;
                justify-items: center !important;
                width: 100% !important;
                position: relative !important;
                z-index: 5 !important;
                padding-bottom: 10px !important;
              }

              .bubble-icon-container {
                min-width: 28px !important;
                min-height: 28px !important;
                grid-row: 1 !important;
                margin: 8px 0 6px 0 !important;
                border-radius: 50% !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                background: ${inGroup
                  ? 'rgba(66, 133, 244, 0.22)'
                  : 'rgba(60, 60, 60, 0.30)'} !important;
                border: ${inGroup
                  ? '1px solid rgba(66, 133, 244, 0.35)'
                  : '1px solid rgba(60, 60, 60, 0.40)'} !important;
              }

              .bubble-icon {
                --mdc-icon-size: 20px !important;
                color: ${inGroup
                  ? 'rgb(66, 133, 244)'
                  : 'rgba(40, 40, 40, 0.80)'} !important;
                filter: ${inGroup ? 'drop-shadow(0 0 3px rgba(66, 133, 244, 0.35))' : 'none'} !important;
              }

              .bubble-name-container {
                grid-row: 2 !important;
                margin: 0 !important;
                width: 100% !important;
              }

              .bubble-name {
                font-weight: 700 !important;
                font-size: 14px !important;
                text-transform: uppercase !important;
                letter-spacing: 0.5px !important;
                line-height: 1.1 !important;
                justify-content: center !important;
                margin: 0 4px !important;
                text-shadow: 0 1px 2px rgba(255, 255, 255, 0.6) !important;
                color: ${inGroup
                  ? 'rgba(40, 40, 40, 0.95)'
                  : 'rgba(50, 50, 50, 0.75)'} !important;
              }

              .bubble-attribute {
                font-size: 12px !important;
                font-weight: 600 !important;
                margin-top: 1px !important;
                justify-content: center !important;
                color: ${inGroup
                  ? 'rgb(66, 133, 244)'
                  : 'rgba(60, 60, 60, 0.7)'} !important;
              }

              .bubble-range-slider {
                position: absolute !important;
                bottom: 4px !important;
                left: 0 !important;
                right: 0 !important;
                margin: 0 auto !important;
                width: 60% !important;
                height: 3px !important;
                border-radius: 3px !important;
                z-index: 10 !important;
                background: ${inGroup
                  ? 'rgba(0, 0, 0, 0.08)'
                  : 'transparent'} !important;
                overflow: hidden !important;
                opacity: ${inGroup ? '1' : '0.5'} !important;
                transition: opacity 0.2s ease !important;
              }

              .bubble-range-fill {
                height: 3px !important;
                border-radius: 3px !important;
                background: rgb(66, 133, 244) !important;
              }

              .bubble-range-value {
                position: fixed !important;
                top: 4px !important;
                right: 5px !important;
                font-size: 9px !important;
                font-weight: 600 !important;
                color: rgba(50, 50, 50, 0.9) !important;
                opacity: 0 !important;
                transition: opacity 0.15s ease !important;
                z-index: 20 !important;
              }

              .is-dragging .bubble-range-value { opacity: 1 !important; }
              .is-dragging .bubble-attribute { opacity: 0 !important; }
            `;
          })()}

      # Spotify
      - type: custom:bubble-card
        card_type: button
        button_type: slider
        entity: media_player.spotify_plus_connect
        name: Spotify
        icon: mdi:spotify
        show_state: false
        show_attribute: true
        attribute: volume_level
        scrolling_effect: false
        tap_action:
          action: more-info
        hold_action:
          action: more-info
        double_tap_action:
          action: call-service
          service: media_player.volume_set
          target:
            entity_id: media_player.spotify_plus_connect
          data:
            volume_level: 0.3
        card_mod:
          style: |
            ha-card {
              background: transparent !important;
              border: none !important;
              box-shadow: none !important;
            }
        styles: |-
          ${(() => {
            const isPlaying = hass.states['media_player.spotify_plus_connect']?.state === 'playing';
            return `
              .bubble-button-card-container {
                position: relative !important;
                display: grid !important;
                grid-template-rows: auto auto 1fr auto !important;
                justify-items: center !important;
                align-items: center !important;
                text-align: center !important;
                min-height: 76px !important;
                padding: 14px 6px 5px 6px !important;
                border-radius: 14px !important;
                overflow: hidden !important;
                clip-path: inset(0 round 14px) !important;
                transition: transform 0.1s ease-out, border-color 0.15s ease, background 0.2s ease !important;
                background: ${isPlaying
                  ? 'rgba(30, 215, 96, 0.15)'
                  : 'rgba(255, 255, 255, 0.12)'} !important;
                backdrop-filter: blur(3px) !important;
                -webkit-backdrop-filter: blur(3px) !important;
                border: ${isPlaying
                  ? '1px solid rgba(30, 215, 96, 0.6)'
                  : '1px solid rgba(120, 120, 120, 0.55)'} !important;
                box-shadow: ${isPlaying
                  ? '0 2px 10px rgba(30, 215, 96, 0.10)'
                  : 'none'} !important;
              }

              .bubble-button-card-container:active { transform: scale(0.95) !important; }

              .bubble-content-container {
                display: grid !important;
                grid-template-rows: auto auto 1fr !important;
                justify-items: center !important;
                width: 100% !important;
                position: relative !important;
                z-index: 5 !important;
                padding-bottom: 10px !important;
              }

              .bubble-icon-container {
                min-width: 28px !important;
                min-height: 28px !important;
                grid-row: 1 !important;
                margin: 8px 0 6px 0 !important;
                border-radius: 50% !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                background: ${isPlaying
                  ? 'rgba(30, 215, 96, 0.22)'
                  : 'rgba(60, 60, 60, 0.30)'} !important;
                border: ${isPlaying
                  ? '1px solid rgba(30, 215, 96, 0.35)'
                  : '1px solid rgba(60, 60, 60, 0.40)'} !important;
              }

              .bubble-icon {
                --mdc-icon-size: 20px !important;
                color: ${isPlaying
                  ? 'rgb(30, 215, 96)'
                  : 'rgba(40, 40, 40, 0.80)'} !important;
                filter: ${isPlaying ? 'drop-shadow(0 0 3px rgba(30, 215, 96, 0.35))' : 'none'} !important;
              }

              .bubble-name-container {
                grid-row: 2 !important;
                margin: 0 !important;
                width: 100% !important;
              }

              .bubble-name {
                font-weight: 700 !important;
                font-size: 14px !important;
                text-transform: uppercase !important;
                letter-spacing: 0.5px !important;
                line-height: 1.1 !important;
                justify-content: center !important;
                margin: 0 4px !important;
                text-shadow: 0 1px 2px rgba(255, 255, 255, 0.6) !important;
                color: ${isPlaying
                  ? 'rgba(40, 40, 40, 0.95)'
                  : 'rgba(50, 50, 50, 0.75)'} !important;
              }

              .bubble-attribute {
                font-size: 12px !important;
                font-weight: 600 !important;
                margin-top: 1px !important;
                justify-content: center !important;
                color: ${isPlaying
                  ? 'rgb(30, 215, 96)'
                  : 'rgba(60, 60, 60, 0.7)'} !important;
              }

              .bubble-range-slider {
                position: absolute !important;
                bottom: 4px !important;
                left: 0 !important;
                right: 0 !important;
                margin: 0 auto !important;
                width: 60% !important;
                height: 3px !important;
                border-radius: 3px !important;
                z-index: 10 !important;
                background: ${isPlaying
                  ? 'rgba(0, 0, 0, 0.08)'
                  : 'transparent'} !important;
                overflow: hidden !important;
                opacity: ${isPlaying ? '1' : '0.5'} !important;
                transition: opacity 0.2s ease !important;
              }

              .bubble-range-fill {
                height: 3px !important;
                border-radius: 3px !important;
                background: rgb(30, 215, 96) !important;
              }

              .bubble-range-value {
                position: fixed !important;
                top: 4px !important;
                right: 5px !important;
                font-size: 9px !important;
                font-weight: 600 !important;
                color: rgba(50, 50, 50, 0.9) !important;
                opacity: 0 !important;
                transition: opacity 0.15s ease !important;
                z-index: 20 !important;
              }

              .is-dragging .bubble-range-value { opacity: 1 !important; }
              .is-dragging .bubble-attribute { opacity: 0 !important; }
            `;
          })()}

card_mod:
  style: |
    :host {
      background:
        radial-gradient(
          ellipse at center,
          rgba(255, 255, 255, 0.35) 0%,
          rgba(255, 255, 255, 0.22) 60%,
          rgba(0, 0, 0, 0.02) 100%
        ),
        url('/local/image/Room7.png') !important;
      backdrop-filter: blur(2px) !important;
      -webkit-backdrop-filter: blur(2px) !important;
      background-size: cover !important;
      background-position: center !important;
      border-radius: 20px !important;
      overflow: hidden !important;
      border: none !important;
      box-shadow: 0 4px 24px rgba(0, 0, 0, 0.08) !important;
      padding: 0 !important;
      display: block !important;
    }
